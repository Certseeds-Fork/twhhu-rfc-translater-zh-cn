{
  "title": {
    "text": "RFC 6198: Requirements for the Graceful Shutdown of BGP Sessions",
    "zh-CHS": "RFC 6198"
  },
  "number": 6198,
  "created_at": "2021-11-05 15:09:12.836597+08:00",
  "updated_by": "",
  "contents": [
    {
      "indent": 0,
      "text": "Internet Engineering Task Force (IETF)                       B. Decraene\nRequest for Comments: 6198                                France Telecom\nCategory: Informational                                      P. Francois\nISSN: 2070-1721                                                      UCL\n                                                              C. Pelsser\n                                                                     IIJ\n                                                                Z. Ahmad\n                                                Orange Business Services\n                                                  A.J. Elizondo Armengol\n                                                          Telefonica I+D\n                                                               T. Takeda\n                                                                     NTT\n                                                              April 2011",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Requirements for the Graceful Shutdown of BGP Sessions",
      "zh-CHS": "正常关闭BGP会话的要求"
    },
    {
      "indent": 0,
      "text": "Abstract",
      "zh-CHS": "摘要"
    },
    {
      "indent": 3,
      "text": "The Border Gateway Protocol (BGP) is heavily used in Service Provider networks for both Internet and BGP/MPLS VPN services. For resiliency purposes, redundant routers and BGP sessions can be deployed to reduce the consequences of an Autonomous System Border Router (ASBR) or BGP session breakdown on customers' or peers' traffic. However, simply taking down or even bringing up a BGP session for maintenance purposes may still induce connectivity losses during the BGP convergence. This is no longer satisfactory for new applications (e.g., voice over IP, online gaming, VPN). Therefore, a solution is required for the graceful shutdown of a (set of) BGP session(s) in order to limit the amount of traffic loss during a planned shutdown. This document expresses requirements for such a solution.",
      "zh-CHS": "边界网关协议（BGP）在Internet和BGP/MPLS VPN服务的服务提供商网络中大量使用。出于弹性目的，可以部署冗余路由器和BGP会话，以减少自治系统边界路由器（ASBR）或BGP会话故障对客户或对等方流量的影响。然而，为了维护目的而简单地关闭甚至打开BGP会话仍可能在BGP聚合期间导致连接丢失。这对于新的应用程序（如IP语音、在线游戏、VPN）不再令人满意。因此，需要一种解决方案来正常关闭（一组）BGP会话，以限制计划关闭期间的通信量损失。本文件说明了此类解决方案的要求。"
    },
    {
      "indent": 0,
      "text": "Status of This Memo",
      "zh-CHS": "关于下段备忘"
    },
    {
      "indent": 3,
      "text": "This document is not an Internet Standards Track specification; it is published for informational purposes.",
      "zh-CHS": "本文件不是互联网标准跟踪规范；它是为了提供信息而发布的。"
    },
    {
      "indent": 3,
      "text": "This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Not all documents approved by the IESG are a candidate for any level of Internet Standard; see Section 2 of RFC 5741.",
      "zh-CHS": "本文件是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受了公众审查，并已被互联网工程指导小组（IESG）批准出版。并非IESG批准的所有文件都适用于任何级别的互联网标准；见RFC 5741第2节。"
    },
    {
      "indent": 3,
      "text": "Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc6198.",
      "zh-CHS": "有关本文件当前状态、任何勘误表以及如何提供反馈的信息，请访问http://www.rfc-editor.org/info/rfc6198."
    },
    {
      "indent": 0,
      "text": "Copyright Notice",
      "zh-CHS": "版权公告"
    },
    {
      "indent": 3,
      "text": "Copyright (c) 2011 IETF Trust and the persons identified as the document authors. All rights reserved.",
      "zh-CHS": "版权所有（c）2011 IETF信托基金和确定为文件作者的人员。版权所有。"
    },
    {
      "indent": 3,
      "text": "This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.",
      "zh-CHS": "本文件受BCP 78和IETF信托有关IETF文件的法律规定的约束(http://trustee.ietf.org/license-info)自本文件出版之日起生效。请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。从本文件中提取的代码组件必须包括信托法律条款第4.e节中所述的简化BSD许可证文本，并提供简化BSD许可证中所述的无担保。"
    },
    {
      "indent": 0,
      "text": "Table of Contents",
      "zh-CHS": "目录"
    },
    {
      "indent": 3,
      "text": "1. Introduction ....................................................2\n2. Conventions Used in This Document ...............................3\n3. Problem Statement ...............................................4\n   3.1. Example of Undesirable BGP Routing Behavior ................4\n   3.2. Causes of Packet Loss ......................................5\n4. Terminology .....................................................6\n5. Goals and Requirements ..........................................7\n6. Security Considerations ........................................10\n7. References .....................................................10\n   7.1. Normative References ......................................10\n   7.2. Informative References ....................................10\nAcknowledgments ...................................................11\nAppendix A. Reference BGP Topologies ..............................12\n   A.1. EBGP Topologies ...........................................12\n   A.2. IBGP Topologies ...........................................15\n   A.3. Routing Decisions .........................................19",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "1. Introduction",
      "section_title": true,
      "zh-CHS": "1. 介绍"
    },
    {
      "indent": 3,
      "text": "The Border Gateway Protocol (BGP) [RFC4271] is heavily used in Service Provider networks for both Internet and BGP/MPLS VPN services [RFC4364]. For resiliency purposes, redundant routers and BGP sessions can be deployed to reduce the consequences of an Autonomous System Border Router (ASBR) or BGP session breakdown on customers' or peers' traffic.",
      "zh-CHS": "边界网关协议（BGP）[RFC4271]在互联网和BGP/MPLS VPN服务的服务提供商网络中大量使用[RFC4364]。出于弹性目的，可以部署冗余路由器和BGP会话，以减少自治系统边界路由器（ASBR）或BGP会话故障对客户或对等方流量的影响。"
    },
    {
      "indent": 3,
      "text": "We place ourselves in the context where a Service Provider performs a maintenance operation and needs to shut down one or multiple BGP peering link(s) or a whole ASBR. If an alternate path is available within the Autonomous System (AS), the requirement is to avoid or reduce customer or peer traffic loss during the BGP convergence.",
      "zh-CHS": "我们将自己置于服务提供商执行维护操作并需要关闭一个或多个BGP对等链路或整个ASBR的环境中。如果自治系统（AS）内有备用路径可用，则要求在BGP聚合期间避免或减少客户或对等流量损失。"
    },
    {
      "indent": 3,
      "text": "Indeed, as an alternate path is available in the AS, it should be made possible to reroute the customer or peer traffic on this backup path before the BGP session(s) is/are torn down, the nominal path withdrawn, and the forwarding stopped.",
      "zh-CHS": "实际上，由于as中有备用路径可用，因此在BGP会话中断、标称路径撤销和转发停止之前，应该能够在此备份路径上重新路由客户或对等通信量。"
    },
    {
      "indent": 3,
      "text": "The requirements also cover the subsequent re-establishment of the BGP session as even this \"UP\" case can currently trigger route loss, and thus traffic loss, at some routers.",
      "zh-CHS": "这些要求还包括BGP会话的后续重建，因为即使这种“启动”情况目前也可能导致某些路由器的路由丢失，从而导致流量丢失。"
    },
    {
      "indent": 3,
      "text": "BGP [RFC4271] and MP-BGP [RFC4760] do not currently have a mechanism to gracefully migrate traffic from one BGP next-hop to another without interrupting the flow of traffic. When a BGP session is taken down, BGP behaves as if there were a sudden link or router failure and withdraws the prefixes learned over that session, which may trigger traffic loss. While still being advertised as reachable, there is no mechanism to advertise to its BGP peers that the prefix will soon be unreachable. When applicable, such mechanism would reduce or prevent traffic loss. It would typically be applicable in case of a maintenance operation requiring the shutdown of a forwarding resource. Typical examples would be a link or line card maintenance, replacement, or upgrade. It may also be applicable for a software upgrade, as it may involve a firmware reset on the line cards and hence forwarding interruption.",
      "zh-CHS": "BGP[RFC4271]和MP-BGP[RFC4760]目前没有一种机制可以在不中断流量的情况下将流量从一个BGP下一跳优雅地迁移到另一个BGP下一跳。当BGP会话被关闭时，BGP的行为就好像发生了突然的链路或路由器故障，并收回在该会话中学习到的前缀，这可能会触发流量丢失。虽然仍被公告为可访问，但没有机制向其BGP对等方公告前缀将很快无法访问。如果适用，这种机制将减少或防止交通损失。它通常适用于需要关闭转发资源的维护操作。典型的例子是链路或线路卡维护、更换或升级。它也可能适用于软件升级，因为它可能涉及线路卡上的固件重置，从而导致转发中断。"
    },
    {
      "indent": 3,
      "text": "The introduction of route reflectors (RRs) as per [RFC4456] to solve scalability issues bound to Internal BGP (IBGP) full-meshes has worsened the duration of routing convergence as some route reflectors may hide the backup path. Thus, depending on RR topology, more IBGP hops may be involved in the IBGP convergence.",
      "zh-CHS": "根据[RFC4456]引入路由反射器（RRs）以解决绑定到内部BGP（IBGP）完整网格的可伸缩性问题，这加剧了路由收敛的持续时间，因为一些路由反射器可能隐藏备份路径。因此，根据RR拓扑，IBGP收敛可能涉及更多IBGP跳。"
    },
    {
      "indent": 3,
      "text": "Note that these planned maintenance operations cannot be addressed by Graceful Restart (GR) extensions [RFC4724] as GR only applies when the forwarding is preserved during the control plane restart. On the contrary, graceful shutdown applies when the forwarding is interrupted.",
      "zh-CHS": "请注意，这些计划维护操作无法通过优雅重启（GR）扩展[RFC4724]解决，因为GR仅在控制平面重启期间保留转发时适用。相反，当转发被中断时，将应用优雅的关闭。"
    },
    {
      "indent": 3,
      "text": "Also, note that some protocols are already considering such a graceful shutdown procedure (e.g., GMPLS in [RFC5817]).",
      "zh-CHS": "另外，请注意，一些协议已经在考虑这样一个优雅的关闭程序（例如，[RFC5817]中的GMPLS）。"
    },
    {
      "indent": 3,
      "text": "A metric of success is the degree to which such a mechanism eliminates traffic loss during maintenance operations.",
      "zh-CHS": "成功的一个指标是这种机制在维护操作期间消除交通损失的程度。"
    },
    {
      "indent": 0,
      "text": "2. Conventions Used in This Document",
      "section_title": true,
      "zh-CHS": "2. 本文件中使用的公约"
    },
    {
      "indent": 3,
      "text": "The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in RFC 2119 [RFC2119].",
      "zh-CHS": "本文件中的关键词“必须”、“不得”、“要求”、“应”、“不应”、“应”、“不应”、“建议”、“可”和“可选”应按照RFC 2119[RFC2119]中所述进行解释。"
    },
    {
      "indent": 0,
      "text": "3. Problem Statement",
      "section_title": true,
      "zh-CHS": "3. 问题陈述"
    },
    {
      "indent": 3,
      "text": "As per [RFC4271], when one (or many) BGP session(s) are shut down, a BGP NOTIFICATION message is sent to the peer and the session is then closed. A protocol convergence is then triggered both by the local router and by the peer. Alternate paths to the destination are selected, if known. If those alternate paths are not known prior to the BGP session shutdown, additional BGP convergence steps are required in each AS to search for an alternate path.",
      "zh-CHS": "根据[RFC4271]，当一个（或多个）BGP会话关闭时，将向对等方发送BGP通知消息，然后关闭会话。然后，本地路由器和对等方都会触发协议聚合。如果已知，则选择到目标的备用路径。如果这些备用路径在BGP会话关闭之前未知，则需要在每个AS中执行额外的BGP聚合步骤以搜索备用路径。"
    },
    {
      "indent": 3,
      "text": "This behavior is not satisfactory in a maintenance situation because the traffic that was directed towards the removed next-hops may be lost until the end of the BGP convergence. As it is a planned operation, a make-before-break solution should be made possible.",
      "zh-CHS": "这种行为在维护情况下并不令人满意，因为在BGP收敛结束之前，定向到已移除的下一跳的流量可能会丢失。由于这是一项有计划的操作，因此应制定先生产后生产的解决方案。"
    },
    {
      "indent": 3,
      "text": "As maintenance operations are frequent in large networks [Reliable], the global availability of the network is significantly impaired by this BGP maintenance issue.",
      "zh-CHS": "由于大型网络中的维护操作频繁[可靠]，因此BGP维护问题严重影响了网络的全局可用性。"
    },
    {
      "indent": 0,
      "text": "3.1. Example of Undesirable BGP Routing Behavior",
      "section_title": true,
      "zh-CHS": "3.1. 不良BGP路由行为示例"
    },
    {
      "indent": 3,
      "text": "To illustrate these problems, let us consider the following simple example where one customer router \"CUST\" is dual-attached to two Service Providers' routers, \"ASBR1\" and \"ASBR2\".",
      "zh-CHS": "为了说明这些问题，让我们考虑下面的简单例子，其中一个客户路由器“CUST”是双连接到两个服务提供商的路由器，“ASBR1”和“ASBR2”。"
    },
    {
      "indent": 3,
      "text": "ASBR1 and ASBR2 are in the same AS and are owned by the same Service Provider. Both are IBGP clients of the route reflector R1.",
      "zh-CHS": "ASBR1和ASBR2与同一服务提供商位于同一位置，并由同一服务提供商拥有。两者都是路由反射器R1的IBGP客户端。"
    },
    {
      "indent": 18,
      "text": " ' AS1 ' AS2 '",
      "zh-CHS": "“AS1”“AS2”"
    },
    {
      "indent": 9,
      "text": "         /-----------ASBR1---\n        /                     \\\n       /                       \\\n   CUST                         R1\n       \\                       /\nZ/z     \\                     /\n         \\-----------ASBR2---",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 18,
      "text": " ' AS1 ' AS2 '",
      "zh-CHS": "“AS1”“AS2”"
    },
    {
      "indent": 9,
      "text": "Figure 1. Dual-Attached Customer",
      "zh-CHS": "图1。双连接客户"
    },
    {
      "indent": 3,
      "text": "Before the maintenance, packets for destination Z/z use the ASBR1- CUST link because R1 selects ASBR1's route based on the IGP cost.",
      "zh-CHS": "在维护之前，目的地Z/Z的数据包使用ASBR1-CUST链路，因为R1根据IGP成本选择ASBR1的路由。"
    },
    {
      "indent": 3,
      "text": "Let's assume the Service Provider wants to shut down the ASBR1-CUST link for maintenance purposes. Currently, when the shutdown is performed on ASBR1, the following steps are performed:",
      "zh-CHS": "假设服务提供商出于维护目的想关闭ASBR1-CUST链接。当前，在ASBR1上执行关机时，将执行以下步骤："
    },
    {
      "indent": 6,
      "text": "1. ASBR1 withdraws its prefix Z/z to its route reflector, R1.",
      "zh-CHS": "1. ASBR1将其前缀Z/Z提取到其路由反射器R1。"
    },
    {
      "indent": 6,
      "text": "2. R1 runs its decision process, selects the route from ASBR2, and advertises the new path to ASBR1.",
      "zh-CHS": "2. R1运行其决策过程，从ASBR2选择路由，并向ASBR1播发新路径。"
    },
    {
      "indent": 6,
      "text": "3. ASBR1 runs its decision process and recovers the reachability of Z/z.",
      "zh-CHS": "3. ASBR1运行其决策过程并恢复Z/Z的可达性。"
    },
    {
      "indent": 3,
      "text": "Traffic is lost at step 1 when ASBR1 looses its route until step 3 when it discovers a new path.",
      "zh-CHS": "ASBR1在第1步松开其路由时，流量会丢失，直到第3步发现新路径时才会丢失。"
    },
    {
      "indent": 3,
      "text": "Note that this is a simplified description for illustrative purposes. In a bigger AS, multiple steps of BGP convergence may be required to find and select the best alternate path (e.g., ASBR1 may be chosen based on a higher LOCAL_PREF, hierarchical route reflectors may be used, etc.). When multiple BGP routers are involved and plenty of prefixes are affected, the recovery process can take longer than application requirements.",
      "zh-CHS": "注意，这是为了说明目的而进行的简化描述。在更大的AS中，可能需要BGP收敛的多个步骤来找到和选择最佳备选路径（例如，可以基于更高的本地优先级选择ASBR1，可以使用分层路由反射器等）。当涉及多个BGP路由器且大量前缀受到影响时，恢复过程可能需要比应用程序要求更长的时间。"
    },
    {
      "indent": 0,
      "text": "3.2. Causes of Packet Loss",
      "section_title": true,
      "zh-CHS": "3.2. 数据包丢失的原因"
    },
    {
      "indent": 3,
      "text": "The loss of packets during maintenance has two main causes:",
      "zh-CHS": "维护期间数据包丢失有两个主要原因："
    },
    {
      "indent": 6,
      "text": "- lack of an alternate path on some routers, and",
      "zh-CHS": "- 某些路由器上缺少备用路径，以及"
    },
    {
      "indent": 6,
      "text": "- transient routing inconsistency.",
      "zh-CHS": "- 暂时路由不一致。"
    },
    {
      "indent": 3,
      "text": "Some routers may lack an alternate path because another router is hiding the backup path. This router can be:",
      "zh-CHS": "某些路由器可能缺少备用路径，因为另一个路由器正在隐藏备份路径。此路由器可以是："
    },
    {
      "indent": 6,
      "text": "- a route reflector only propagating its best path.",
      "zh-CHS": "- 仅传播其最佳路径的路由反射器。"
    },
    {
      "indent": 6,
      "text": "- the backup ASBR not advertising the backup path because it prefers the nominal path.",
      "zh-CHS": "- 备份ASBR不公布备份路径，因为它更喜欢标称路径。"
    },
    {
      "indent": 3,
      "text": "This lack of knowledge regarding the alternate path is the first target of this requirements document.",
      "zh-CHS": "缺乏关于备用路径的知识是本需求文件的首要目标。"
    },
    {
      "indent": 3,
      "text": "Transient routing inconsistencies happen during IBGP convergence because routers do not simultaneously update their Routing Information Bases (RIBs) and hence do not simultaneously update their",
      "zh-CHS": "IBGP收敛期间会出现暂时的路由不一致，因为路由器不会同时更新其路由信息库（RIB），因此也不会同时更新其路由信息库"
    },
    {
      "indent": 3,
      "text": "Forwarding Information Bases (FIBs) entries. This can lead to forwarding loops, which result in both link congestion and packet drops. The duration of these transient micro-loops is dependent on the IBGP topology (e.g., number of route reflectors between ingress and egress ASBR), implementation differences among router platforms (which result in differences in the time taken to update specific prefix in the FIB), and forwarding mode (hop-by-hop IP forwarding versus tunneling).",
      "zh-CHS": "转发信息库（FIB）条目。这可能导致转发循环，从而导致链路拥塞和数据包丢失。这些瞬态微环路的持续时间取决于IBGP拓扑（例如，入口和出口ASBR之间的路由反射器数量）、路由器平台之间的实现差异（这导致在FIB中更新特定前缀所需的时间不同）和转发模式（逐跳IP转发与隧道）。"
    },
    {
      "indent": 3,
      "text": "Note that when an IP lookup is only performed on entry to the AS, for example, prior to entry into a tunnel across the AS, micro-loops will not occur. An example of this is when BGP is being used as the routing protocol for MPLS VPN as defined in [RFC4364].",
      "zh-CHS": "请注意，如果仅在进入AS时执行IP查找，例如，在进入穿越AS的隧道之前，将不会发生微循环。例如，BGP被用作[RFC4364]中定义的MPLS VPN的路由协议。"
    },
    {
      "indent": 3,
      "text": "Note that [RFC5715] defines a framework for loop-free convergence. It has been written in the context of IP fast reroute for link state IGP [RFC5714], but some concepts are also of interest for BGP convergence.",
      "zh-CHS": "注意，[RFC5715]定义了一个无循环收敛的框架。它是在链路状态IGP[RFC5714]的IP快速重路由上下文中编写的，但一些概念也对BGP收敛感兴趣。"
    },
    {
      "indent": 0,
      "text": "4. Terminology",
      "section_title": true,
      "zh-CHS": "4. 术语"
    },
    {
      "indent": 3,
      "text": "g-shut: Graceful shutdown. A method for explicitly notifying the BGP routers that a BGP session (and hence the prefixes learned over that session) is going to be disabled.",
      "zh-CHS": "关闭：优雅的关闭。一种方法，用于显式通知BGP路由器BGP会话（以及通过该会话学习的前缀）将被禁用。"
    },
    {
      "indent": 3,
      "text": "g-noshut: Graceful no shutdown. A method for explicitly notifying the BGP routers that a BGP session (and hence the prefixes learned over that session) is going to be enabled.",
      "zh-CHS": "g-noshut：没有关机。一种显式通知BGP路由器将启用BGP会话（以及通过该会话学习的前缀）的方法。"
    },
    {
      "indent": 3,
      "text": "g-shut initiator: the router on which the session(s) shutdown(s) is (are) performed for maintenance.",
      "zh-CHS": "g-shut启动器：在其上执行会话关闭以进行维护的路由器。"
    },
    {
      "indent": 3,
      "text": "g-shut neighbor: a router that peers with the g-shut initiator via (one of) the session(s) undergoing maintenance.",
      "zh-CHS": "g-shut邻居：通过（其中一个）正在维护的会话与g-shut启动器对等的路由器。"
    },
    {
      "indent": 3,
      "text": "affected prefixes: a prefix initially reached via the peering link(s) undergoing maintenance.",
      "zh-CHS": "受影响的前缀：最初通过正在维护的对等链路到达的前缀。"
    },
    {
      "indent": 3,
      "text": "affected router: a router reaching an affected prefix via a peering link undergoing maintenance.",
      "zh-CHS": "受影响路由器：通过正在维护的对等链路到达受影响前缀的路由器。"
    },
    {
      "indent": 3,
      "text": "initiator AS: the autonomous system of the g-shut initiator router.",
      "zh-CHS": "启动器AS：g-shut启动器路由器的自治系统。"
    },
    {
      "indent": 3,
      "text": "neighbor AS(es): the autonomous system(s) of the g-shut neighbor router(s).",
      "zh-CHS": "邻居AS（es）：g-shut邻居路由器的自治系统。"
    },
    {
      "indent": 0,
      "text": "5. Goals and Requirements",
      "section_title": true,
      "zh-CHS": "5. 目标和要求"
    },
    {
      "indent": 3,
      "text": "Currently, when a BGP session of the router under maintenance is shut down, the router removes the routes and then triggers the BGP convergence on its BGP peers by withdrawing its route.",
      "zh-CHS": "当前，当正在维护的路由器的BGP会话关闭时，路由器会删除路由，然后通过撤回路由在其BGP对等方上触发BGP聚合。"
    },
    {
      "indent": 3,
      "text": "The goal of BGP graceful shutdown of a (set of) BGP session(s) is to minimize traffic loss during a planned shutdown. Ideally, a solution should reduce this traffic loss to zero.",
      "zh-CHS": "BGP正常关闭（一组）BGP会话的目标是在计划关闭期间将流量损失降至最低。理想情况下，解决方案应将此流量损失降至零。"
    },
    {
      "indent": 3,
      "text": "Another goal is to minimize and, preferably, to eliminate packet loss when the BGP session is re-established following the maintenance.",
      "zh-CHS": "另一个目标是在维护之后重新建立BGP会话时最小化并且优选地消除分组丢失。"
    },
    {
      "indent": 3,
      "text": "As the event is known in advance, a make-before-break solution can be used in order to initiate the BGP convergence, find and install the alternate paths before the nominal paths are removed. As a result, before the nominal BGP session is shut down, all affected routers learn and use the alternate paths. Those alternate paths are computed by BGP, taking into account the known status of the network, which includes known failures that the network is processing concurrently with the BGP session graceful shutdown and possibly other known graceful shutdowns under way. Therefore, multiple BGP graceful shutdowns overlapping within a short time frame are gracefully handled. Indeed, a given graceful shutdown takes into account all previous ones.",
      "zh-CHS": "由于事件事先已知，可以使用先通后断解决方案来启动BGP聚合，在移除标称路径之前找到并安装备用路径。因此，在正常BGP会话关闭之前，所有受影响的路由器都会学习并使用备用路径。这些备用路径由BGP计算，考虑到网络的已知状态，其中包括网络在BGP会话正常关机的同时处理的已知故障，以及可能正在进行的其他已知正常关机。因此，在短时间内重叠的多个BGP正常关机操作得到了妥善处理。事实上，给定的优雅关机会考虑到之前的所有关机。"
    },
    {
      "indent": 3,
      "text": "As a result, provided an alternate path with enough remaining capacity is available, the packets are rerouted before the BGP session termination and fewer packets (possibly none) are lost during the BGP convergence process since, at any time, all routers have a valid path.",
      "zh-CHS": "因此，如果具有足够剩余容量的备用路径可用，则在BGP会话终止之前重新路由数据包，并且在BGP聚合过程中丢失的数据包更少（可能没有），因为在任何时候，所有路由器都具有有效路径。"
    },
    {
      "indent": 3,
      "text": "From the above goals, we can derive the following requirements:",
      "zh-CHS": "根据上述目标，我们可以得出以下要求："
    },
    {
      "indent": 3,
      "text": "a) A mechanism to advertise the maintenance action to all affected routers is REQUIRED. Such a mechanism may be either implicit or explicit. Note that affected routers can be located both in the local AS and in neighboring ASes. Note also that the maintenance action can either be the shutdown of a BGP session or the establishment of a BGP session.",
      "zh-CHS": "a) 需要一种向所有受影响的路由器通告维护操作的机制。这种机制可以是隐式的，也可以是显式的。请注意，受影响的路由器可以位于本地AS和相邻AS中。还要注意，维护操作可以是关闭BGP会话，也可以是建立BGP会话。"
    },
    {
      "indent": 8,
      "text": "The mechanism SHOULD allow BGP routers to minimize and, preferably, eliminate packet loss when a path is removed or advertised. In particular, it SHOULD be ensured that the old path is not removed from the routing tables of the affected routers before the new path is known.",
      "zh-CHS": "该机制应允许BGP路由器在移除或公布路径时最小化并最好消除数据包丢失。特别是，应确保在知道新路径之前，不会从受影响路由器的路由表中删除旧路径。"
    },
    {
      "indent": 8,
      "text": "The solution mechanism MUST significantly reduce and, ideally, eliminate packet loss. A trade-off may be made between the degree of packet loss and the simplicity of the solution.",
      "zh-CHS": "解决方案机制必须显著减少，理想情况下，消除数据包丢失。可以在分组丢失的程度和解决方案的简单性之间进行权衡。"
    },
    {
      "indent": 3,
      "text": "b) An Internet-wide convergence is OPTIONAL. However, if the initiator AS and the neighbor AS(es) have a backup path, they SHOULD be able to gracefully converge before the nominal path is shut down.",
      "zh-CHS": "b) 互联网范围的融合是可选的。但是，如果启动器AS和邻居AS具有备份路径，则它们应该能够在关闭标称路径之前正常聚合。"
    },
    {
      "indent": 3,
      "text": "c) The proposed solution SHOULD be applicable to any kind of BGP sessions (External BGP (EBGP), IBGP, IBGP route reflector client, EBGP confederations, EBGP multi hop, MultiProtocol BGP extension, etc.) and any address family. If a BGP implementation allows the closing or enabling of a subset of Address Family Identifiers (AFIs) carried in an MP-BGP session, this mechanism MAY be applicable to this subset of AFIs.",
      "zh-CHS": "c) 建议的解决方案应适用于任何类型的BGP会话（外部BGP（EBGP）、IBGP、IBGP路由反射客户端、EBGP联盟、EBGP多跳、多协议BGP扩展等）和任何地址族。如果BGP实现允许关闭或启用MP-BGP会话中携带的地址族标识符（AFI）子集，则该机制可适用于该AFI子集。"
    },
    {
      "indent": 8,
      "text": "Depending on the kind of session, there may be some variations in the proposed solution in order to fulfill the requirements.",
      "zh-CHS": "根据会话的类型，建议的解决方案可能会有一些变化，以满足需求。"
    },
    {
      "indent": 8,
      "text": "The following cases should be handled in priority:",
      "zh-CHS": "应优先处理下列情况："
    },
    {
      "indent": 8,
      "text": "- The shutdown of an inter-AS link and therefore the shutdown of an EBGP session;",
      "zh-CHS": "- 关闭AS间链路，从而关闭EBGP会话；"
    },
    {
      "indent": 8,
      "text": "- The shutdown of an ASBR and therefore the shutdown of all its BGP sessions.",
      "zh-CHS": "- 关闭ASBR，从而关闭其所有BGP会话。"
    },
    {
      "indent": 8,
      "text": "Service Providers and platforms implementing a graceful shutdown solution should note that in BGP/MPLS VPN as per [RFC4364], the Provider Edge - Customer Edge (PE-CE) routing can be performed by protocols other than BGP (e.g., static routes, RIPv2, OSPF, IS-IS). This is out of scope of this document.",
      "zh-CHS": "实施优雅关机解决方案的服务提供商和平台应注意，在符合[RFC4364]的BGP/MPLS VPN中，提供商边缘-客户边缘（PE-CE）路由可通过BGP以外的协议执行（例如，静态路由、RIPv2、OSPF、IS-IS）。这超出了本文档的范围。"
    },
    {
      "indent": 3,
      "text": "d) The proposed solution SHOULD NOT change the BGP convergence behavior for the ASes exterior to the maintenance process, namely, ASes other than the initiator AS and its neighbor AS(es).",
      "zh-CHS": "d) 建议的解决方案不应改变维护过程外部ASE的BGP收敛行为，即除了启动器AS及其邻居AS之外的ASE。"
    },
    {
      "indent": 3,
      "text": "e) An incremental deployment on a per-AS or per-BGP session basis MUST be made possible. In case of partial deployment, the proposed solution SHOULD incrementally improve the maintenance process. It should be noted that in an inter-domain relation, one AS may have more incentive to use graceful shutdown than the other. Similarly, in a BGP/MPLS VPN environment, it's much easier to upgrade the PE routers than the CE ones, mainly because there is at least an order of magnitude more CE and CE locations than PE and PE locations. As a consequence, when",
      "zh-CHS": "e) 必须能够根据AS或BGP会话进行增量部署。如果部分部署，建议的解决方案应逐步改进维护过程。应该注意的是，在域间关系中，一个AS可能比另一个AS更有动机使用优雅关机。类似地，在BGP/MPLS VPN环境中，升级PE路由器比升级CE路由器容易得多，主要是因为CE和CE位置至少比PE和PE位置多一个数量级。因此，当"
    },
    {
      "indent": 8,
      "text": "splitting the cost of the solution between the g-shut initiator and the g-shut neighbor, the solution SHOULD favor a low-cost solution on the neighbor AS side in order to reduce the impact on the g-shut neighbor. Impact should be understood as a generic term that includes first hardware, then software, then configuration upgrade.",
      "zh-CHS": "在g-shut发起方和g-shut邻居之间分摊解决方案的成本时，解决方案应倾向于使用低成本的解决方案，以减少对g-shut邻居的影响。影响应理解为一个通用术语，首先包括硬件，然后是软件，然后是配置升级。"
    },
    {
      "indent": 3,
      "text": "f) Redistribution or advertisement of (static) IP routes into BGP SHOULD also be covered.",
      "zh-CHS": "f) 还应涵盖BGP中（静态）IP路由的重新分配或广告。"
    },
    {
      "indent": 3,
      "text": "g) The proposed solution MAY be designed in order to avoid transient forwarding loops. Indeed, forwarding loops increase packet transit-delay and may lead to link saturation.",
      "zh-CHS": "g) 建议的解决方案可以设计为避免瞬态转发循环。实际上，转发循环增加了数据包传输延迟，并可能导致链路饱和。"
    },
    {
      "indent": 3,
      "text": "h) The specific procedure SHOULD end when the BGP session is closed following the g-shut and once the BGP session is gracefully opened following the g-noshut. In the end, once the planned maintenance is finished, the nominal BGP routing MUST be re-established. The duration of the g-shut procedure, and hence the time before the BGP session is safely closed, SHOULD be discussed by the solution document. Examples of possible solutions are the use of a pre-configured timer, the use of a message to signal the end of the BGP convergence, or the monitoring of the traffic on the g-shut interface.",
      "zh-CHS": "h) 当BGP会话在g-shut后关闭，且BGP会话在g-noshut后正常打开时，特定程序应结束。最后，一旦计划维护完成，必须重新建立标称BGP路由。解决方案文档应讨论g-shut过程的持续时间，以及BGP会话安全关闭之前的时间。可能的解决方案示例包括使用预先配置的计时器、使用消息通知BGP聚合结束，或监控g-shut接口上的流量。"
    },
    {
      "indent": 3,
      "text": "i) The solution SHOULD be simple and simple to operate. Hence, it MAY only cover a subset of the cases. As a consequence, most of the above requirements are expressed as \"SHOULD\" rather than \"MUST\".",
      "zh-CHS": "i) 解决方案应简单且易于操作。因此，它可能只涵盖一部分情况。因此，上述大多数要求都表示为“应该”而不是“必须”。"
    },
    {
      "indent": 8,
      "text": "The metrics to evaluate and compare the proposed solutions are:",
      "zh-CHS": "评估和比较拟议解决方案的指标包括："
    },
    {
      "indent": 8,
      "text": "- The duration of the remaining loss of connectivity when the BGP session is brought down or up;",
      "zh-CHS": "- BGP会话关闭或打开时剩余连接丢失的持续时间；"
    },
    {
      "indent": 8,
      "text": "- The applicability to a wide range of BGP and network topologies;",
      "zh-CHS": "- 适用于广泛的BGP和网络拓扑；"
    },
    {
      "indent": 8,
      "text": "- The simplicity;",
      "zh-CHS": "- 简单；"
    },
    {
      "indent": 8,
      "text": "- The duration of transient forwarding loops;",
      "zh-CHS": "- 瞬时转发循环的持续时间；"
    },
    {
      "indent": 8,
      "text": "- The additional load introduced in BGP (e.g., BGP messages sent to peer routers, peer ASes, the Internet).",
      "zh-CHS": "- BGP中引入的额外负载（例如，发送到对等路由器、对等ASE和Internet的BGP消息）。"
    },
    {
      "indent": 0,
      "text": "6. Security Considerations",
      "section_title": true,
      "zh-CHS": "6. 安全考虑"
    },
    {
      "indent": 3,
      "text": "At the requirements stage, this graceful shutdown mechanism is not expected to affect the security of the BGP protocol, especially if it can be kept simple. No new sessions are required and the additional ability to signal the graceful shutdown is not expected to bring additional attack vectors, as BGP neighbors already have the ability to send incorrect or misleading information or even shut down the session.",
      "zh-CHS": "在需求阶段，这种优雅的关闭机制预计不会影响BGP协议的安全性，特别是如果它可以保持简单的话。不需要新会话，并且发出正常关闭信号的附加功能预计不会带来额外的攻击向量，因为BGP邻居已经能够发送错误或误导性信息，甚至关闭会话。"
    },
    {
      "indent": 3,
      "text": "Security considerations MUST be addressed by the proposed solutions. In particular, they SHOULD address the issues of bogus g-shut messages and how they would affect the network(s), as well as the impact of hiding a g-shut message so that g-shut is not performed.",
      "zh-CHS": "提议的解决方案必须考虑到安全问题。特别是，他们应该解决伪g-shut消息的问题，以及它们将如何影响网络，以及隐藏g-shut消息以便不执行g-shut的影响。"
    },
    {
      "indent": 3,
      "text": "The solution SHOULD NOT increase the ability of one AS to selectively influence routing decision in the peer AS (inbound Traffic Engineering) outside of the case of the BGP session shutdown. Otherwise, the peer AS SHOULD have means to detect such behavior.",
      "zh-CHS": "在BGP会话关闭的情况下，解决方案不应增加AS选择性地影响对等AS（入站流量工程）中的路由决策的能力。否则，对等AS应该拥有检测此类行为的手段。"
    },
    {
      "indent": 0,
      "text": "7. References",
      "section_title": true,
      "zh-CHS": "7. 工具书类"
    },
    {
      "indent": 0,
      "text": "7.1. Normative References",
      "section_title": true,
      "zh-CHS": "7.1. 规范性引用文件"
    },
    {
      "indent": 3,
      "text": "[RFC2119] Bradner, S., \"Key words for use in RFCs to Indicate Requirement Levels\", BCP 14, RFC 2119, March 1997.",
      "zh-CHS": "[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，1997年3月。"
    },
    {
      "indent": 3,
      "text": "[RFC4271] Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., \"A Border Gateway Protocol 4 (BGP-4)\", RFC 4271, January 2006.",
      "zh-CHS": "[RFC4271]Rekhter，Y.，Ed.，Li，T.，Ed.，和S.Hares，Ed.，“边境网关协议4（BGP-4）”，RFC 42712006年1月。"
    },
    {
      "indent": 3,
      "text": "[RFC4760] Bates, T., Chandra, R., Katz, D., and Y. Rekhter, \"Multiprotocol Extensions for BGP-4\", RFC 4760, January 2007.",
      "zh-CHS": "[RFC4760]Bates，T.，Chandra，R.，Katz，D.，和Y.Rekhter，“BGP-4的多协议扩展”，RFC 4760，2007年1月。"
    },
    {
      "indent": 3,
      "text": "[RFC4456] Bates, T., Chen, E., and R. Chandra, \"BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP)\", RFC 4456, April 2006.",
      "zh-CHS": "[RFC4456]Bates，T.，Chen，E.，和R.Chandra，“BGP路由反射：全网格内部BGP（IBGP）的替代方案”，RFC 4456，2006年4月。"
    },
    {
      "indent": 3,
      "text": "[RFC4364] Rosen, E. and Y. Rekhter, \"BGP/MPLS IP Virtual Private Networks (VPNs)\", RFC 4364, February 2006.",
      "zh-CHS": "[RFC4364]Rosen，E.和Y.Rekhter，“BGP/MPLS IP虚拟专用网络（VPN）”，RFC 4364，2006年2月。"
    },
    {
      "indent": 0,
      "text": "7.2. Informative References",
      "section_title": true,
      "zh-CHS": "7.2. Informative Referencestranslate error, please retry"
    },
    {
      "indent": 3,
      "text": "[RFC5817] Ali, Z., Vasseur, JP., Zamfir, A., and J. Newton, \"Graceful Shutdown in MPLS and Generalized MPLS Traffic Engineering Networks\", RFC 5817, April 2010.",
      "zh-CHS": "[RFC5817]Ali，Z.，Vasseur，JP.，Zamfir，A.，和J.Newton，“MPLS和广义MPLS流量工程网络中的优雅关机”，RFC 58172010年4月。"
    },
    {
      "indent": 3,
      "text": "[RFC5715] Shand, M. and S. Bryant, \"A Framework for Loop-Free Convergence\", RFC 5715, January 2010.",
      "zh-CHS": "[RFC5715]Shand，M.和S.Bryant，“无环收敛框架”，RFC 5715，2010年1月。"
    },
    {
      "indent": 3,
      "text": "[RFC5714] Shand, M. and S. Bryant, \"IP Fast Reroute Framework\", RFC 5714, January 2010.",
      "zh-CHS": "[RFC5714]Shand，M.和S.Bryant，“IP快速重路由框架”，RFC 5714，2010年1月。"
    },
    {
      "indent": 3,
      "text": "[RFC4724] Sangli, S., Chen, E., Fernando, R., Scudder, J., and Y. Rekhter, \"Graceful Restart Mechanism for BGP\", RFC 4724, January 2007.",
      "zh-CHS": "[RFC4724]Sangli，S.，Chen，E.，Fernando，R.，Scudder，J.，和Y.Rekhter，“BGP的优雅重启机制”，RFC 47242007年1月。"
    },
    {
      "indent": 3,
      "text": "[Reliable] Network Strategy Partners, LLC. \"Reliable IP Nodes: A\n           prerequisite to profitable IP services\", November 2002.\n           http://www.nspllc.com/NewPages/Reliable_IP_Nodes.pdf",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "Acknowledgments",
      "zh-CHS": "致谢"
    },
    {
      "indent": 3,
      "text": "The authors would like to thank Nicolas Dubois, Benoit Fondeviole, Christian Jacquenet, Olivier Bonaventure, Steve Uhlig, Xavier Vinet, Vincent Gillet, Jean-Louis le Roux, Pierre Alain Coste, and Ronald Bonica for their useful discussions on this subject, review, and comments.",
      "zh-CHS": "作者要感谢Nicolas Dubois、Benoit Fondeviole、Christian Jacquenet、Olivier Bonaventure、Steve Uhlig、Xavier Vinet、Vincent Gillet、Jean-Louis le Roux、Pierre Alain Coste和Ronald Bonica就这一主题进行的有益讨论、评论和评论。"
    },
    {
      "indent": 3,
      "text": "This document has been partly sponsored by the European project IST AGAVE.",
      "zh-CHS": "本文件部分由欧洲IST龙舌兰项目赞助。"
    },
    {
      "indent": 0,
      "text": "Appendix A. Reference BGP Topologies",
      "section_title": true,
      "zh-CHS": "附录A.参考BGP拓扑"
    },
    {
      "indent": 3,
      "text": "This section describes some frequent BGP topologies used both within the AS (IBGP) and between ASes (EBGP). Solutions should be applicable to the following topologies and their combinations.",
      "zh-CHS": "本节描述了在AS（IBGP）内部和AS（EBGP）之间使用的一些常见BGP拓扑。解决方案应适用于以下拓扑及其组合。"
    },
    {
      "indent": 0,
      "text": "A.1. EBGP Topologies",
      "section_title": true,
      "zh-CHS": "A.1. EBGP拓扑"
    },
    {
      "indent": 3,
      "text": "This section describes some frequent BGP topologies used between ASes. In each figure, a line represents a BGP session.",
      "zh-CHS": "本节介绍ASE之间使用的一些常见BGP拓扑。在每个图中，一行表示BGP会话。"
    },
    {
      "indent": 0,
      "text": "A.1.1. One ASBR in AS1 Connected to Two ASBRs in the Neighboring AS2",
      "section_title": true,
      "zh-CHS": "A.1.1. AS1中的一个ASBR连接到相邻AS2中的两个ASBR"
    },
    {
      "indent": 3,
      "text": "In this topology, we have an asymmetric protection scheme between AS1 and AS2:",
      "zh-CHS": "在此拓扑中，我们在AS1和AS2之间有一个不对称保护方案："
    },
    {
      "indent": 6,
      "text": "- On the AS2 side, two different routers are used to connect to AS1.",
      "zh-CHS": "- 在AS2端，使用两个不同的路由器连接到AS1。"
    },
    {
      "indent": 6,
      "text": "- On the AS1 side, one single router with two BGP sessions is used.",
      "zh-CHS": "- 在AS1端，使用一个路由器和两个BGP会话。"
    },
    {
      "indent": 9,
      "text": "           '\n     AS1   '      AS2\n           '\n     /----------- ASBR2.1\n    /      '\n   /       '\nASBR1.1    '\n   \\       '\n    \\      '\n     \\----------- ASBR2.2\n           '\n           '\n AS1       '      AS2\n           '",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 2. EBGP Topology with Redundant ASBR in One of the ASes",
      "zh-CHS": "图2。其中一个ASE中具有冗余ASBR的EBGP拓扑"
    },
    {
      "indent": 3,
      "text": "BGP graceful shutdown is expected to be applicable for the maintenance of:",
      "zh-CHS": "BGP优雅停机预计适用于以下设备的维护："
    },
    {
      "indent": 6,
      "text": "- one of the routers of AS2;",
      "zh-CHS": "- AS2的一个路由器；"
    },
    {
      "indent": 6,
      "text": "- one link between AS1 and AS2, performed either on an AS1 or AS2 router.",
      "zh-CHS": "- AS1和AS2之间的一条链路，在AS1或AS2路由器上执行。"
    },
    {
      "indent": 3,
      "text": "Note that in the case of maintenance of the whole router, all its BGP sessions need to be gracefully shutdown at the beginning of the maintenance and gracefully brought up at the end of the maintenance.",
      "zh-CHS": "请注意，在维护整个路由器的情况下，其所有BGP会话需要在维护开始时正常关闭，并在维护结束时正常启动。"
    },
    {
      "indent": 0,
      "text": "A.1.2. Two ASBRs in AS1 Connected to Two ASBRs in AS2",
      "section_title": true,
      "zh-CHS": "A.1.2. AS1中的两个ASBR连接到AS2中的两个ASBR"
    },
    {
      "indent": 3,
      "text": "In this topology, we have a symmetric protection scheme between AS1 and AS2: on both sides, two different routers are used to connect AS1 to AS2.",
      "zh-CHS": "在这种拓扑结构中，AS1和AS2之间有一个对称保护方案：在两侧，使用两个不同的路由器将AS1连接到AS2。"
    },
    {
      "indent": 9,
      "text": "             '\n       AS1   '      AS2\n             '\nASBR1.1----------- ASBR2.1\n             '\n             '\n             '\n             '\n             '\nASBR1.2----------- ASBR2.2\n             '\n   AS1       '      AS2\n             '",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 3. EBGP Topology with Redundant ASBRs in Both ASes",
      "zh-CHS": "图3。两个ASE中具有冗余ASBR的EBGP拓扑"
    },
    {
      "indent": 3,
      "text": "BGP graceful shutdown is expected to be applicable for the maintenance of:",
      "zh-CHS": "BGP优雅停机预计适用于以下设备的维护："
    },
    {
      "indent": 6,
      "text": "- any of the ASBR routers (in AS1 or AS2);",
      "zh-CHS": "- 任何ASBR路由器（在AS1或AS2中）；"
    },
    {
      "indent": 6,
      "text": "- one link between AS1 and AS2, performed either on an AS1 or AS2 router.",
      "zh-CHS": "- AS1和AS2之间的一条链路，在AS1或AS2路由器上执行。"
    },
    {
      "indent": 0,
      "text": "A.1.3. Two ASBRs in AS2 Each Connected to Two Different ASes",
      "section_title": true,
      "zh-CHS": "A.1.3. AS2中的两个ASBR分别连接到两个不同的ASE"
    },
    {
      "indent": 3,
      "text": "In this topology, at least three ASes are involved.",
      "zh-CHS": "在这种拓扑结构中，至少涉及三个ASE。"
    },
    {
      "indent": 9,
      "text": "               '\n         AS1   '      AS2\n               '\n  ASBR1.1----------- ASBR2.1\n     |         '\n     |         '\n'''''|''''''''''\n     |         '\n     |         '\n  ASBR3.1----------- ASBR2.2\n               '\n     AS3       '      AS2",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 4. EBGP Topology of a Dual-Homed Customer",
      "zh-CHS": "图4。双宿客户的EBGP拓扑"
    },
    {
      "indent": 3,
      "text": "As the requirement expressed in Section 5 is to advertise the maintenance only within the initiator and neighbor ASes, not Internet-wide, BGP graceful shutdown solutions may not be applicable to this topology. Depending on which routes are exchanged between these ASes, some protection for some of the traffic may be possible.",
      "zh-CHS": "由于第5节中所述的要求是仅在启动器和邻居ASE内公布维护，而不是在互联网范围内，BGP优雅关机解决方案可能不适用于此拓扑。根据这些ASE之间交换的路由，可能会对某些流量进行一些保护。"
    },
    {
      "indent": 3,
      "text": "For instance, if ASBR2.2 performs a maintenance affecting ASBR3.1, then ASBR3.1 will be notified. However, ASBR1.1 may not be notified of the maintenance of the EBGP session between ASBR3.1 and ASBR2.2.",
      "zh-CHS": "例如，如果ASBR2.2执行影响ASBR3.1的维护，则会通知ASBR3.1。但是，ASBR3.1和ASBR2.2之间的EBGP会话的维护可能不会通知ASBR1.1。"
    },
    {
      "indent": 0,
      "text": "A.2. IBGP Topologies",
      "section_title": true,
      "zh-CHS": "A.2. IBGP拓扑"
    },
    {
      "indent": 3,
      "text": "This section describes some frequent BGP topologies used within an AS. In each figure, a line represents a BGP session.",
      "zh-CHS": "本节介绍AS中使用的一些常见BGP拓扑。在每个图中，一行表示BGP会话。"
    },
    {
      "indent": 0,
      "text": "A.2.1. IBGP Full-Mesh",
      "section_title": true,
      "zh-CHS": "A.2.1. 全网"
    },
    {
      "indent": 3,
      "text": "In this topology, we have a full-mesh of IBGP sessions:",
      "zh-CHS": "在此拓扑中，我们有一个完整的IBGP会话网格："
    },
    {
      "indent": 9,
      "text": "   P1 ----- P2\n   | \\    / |\n   |  \\  /  |\n   |   \\/   |     AS1\n   |   /\\   |\n   |  /  \\  |\n   | /    \\ |\n ASBR1.1--ASBR1.2\n    \\       /\n     \\     /\n''''''\\'''/''''''''''''\n       \\ /      AS2\n      ASBR2.1",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 5. IBGP Full-Mesh",
      "zh-CHS": "图5。全网"
    },
    {
      "indent": 3,
      "text": "When the session between ASBR1.1 and ASBR2.1 is gracefully shut down, it is required that all affected routers of AS1 reroute traffic to ASBR1.2 before the session between ASBR1.1 and ASBR2.1 is shut down.",
      "zh-CHS": "当ASBR1.1和ASBR2.1之间的会话正常关闭时，要求所有受影响的AS1路由器在ASBR1.1和ASBR2.1之间的会话关闭之前将流量重新路由到ASBR1.2。"
    },
    {
      "indent": 3,
      "text": "Similarly, when the session between ASBR1.1 and ASBR2.1 is gracefully brought up, all affected routers of AS1 preferring ASBR1.1 over ASBR1.2 need to reroute traffic to ASBR1.1 before the less preferred path through ASBR1.2 is possibly withdrawn.",
      "zh-CHS": "类似地，当ASBR1.1和ASBR2.1之间的会话正常启动时，所有优先选择ASBR1.1而不是ASBR1.2的AS1受影响路由器都需要将流量重新路由到ASBR1.1，然后通过ASBR1.2的不太优先路径才可能被撤回。"
    },
    {
      "indent": 0,
      "text": "A.2.2. Route Reflector",
      "section_title": true,
      "zh-CHS": "A.2.2. 路由反射器"
    },
    {
      "indent": 3,
      "text": "In this topology, route reflectors are used to limit the number of IBGP sessions. There is a single level of route reflectors and the route reflectors are fully meshed.",
      "zh-CHS": "在此拓扑中，路由反射器用于限制IBGP会话的数量。路线反射器为单层，且路线反射器完全啮合。"
    },
    {
      "indent": 9,
      "text": "   P1 (RR)-- P2 (RR)\n   | \\      / |\n   |  \\    /  |\n   |   \\  /   |     AS1\n   |    \\/    |\n   |    /\\    |\n   |   /  \\   |\n   |  /    \\  |\n   | /      \\ |\n ASBR1.1    ASBR1.2\n    \\          /\n     \\        /\n''''''\\''''''/''''''''''''\n       \\    /\n        \\  /         AS2\n       ASBR2.1",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 6. Route Reflector",
      "zh-CHS": "图6。路由反射器"
    },
    {
      "indent": 3,
      "text": "When the session between ASBR1.1 and ASBR2.1 is gracefully shut down, all BGP routers of AS1 need to reroute traffic to ASBR1.2 before the session between ASBR1.1 and ASBR2.1 is shut down.",
      "zh-CHS": "当ASBR1.1和ASBR2.1之间的会话正常关闭时，AS1的所有BGP路由器需要在ASBR1.1和ASBR2.1之间的会话关闭之前将流量重新路由到ASBR1.2。"
    },
    {
      "indent": 3,
      "text": "Similarly, when the session between ASBR1.1 and ASBR2.1 is gracefully brought up, all affected routers of AS1 preferring ASBR1.1 over ASBR1.2 need to reroute traffic to ASBR1.1 before the less preferred path through ASBR1.2 is possibly withdrawn.",
      "zh-CHS": "类似地，当ASBR1.1和ASBR2.1之间的会话正常启动时，所有优先选择ASBR1.1而不是ASBR1.2的AS1受影响路由器都需要将流量重新路由到ASBR1.1，然后通过ASBR1.2的不太优先路径才可能被撤回。"
    },
    {
      "indent": 0,
      "text": "A.2.3. Hierarchical Route Reflector",
      "section_title": true,
      "zh-CHS": "A.2.3. 分层路由反射器"
    },
    {
      "indent": 3,
      "text": "In this topology, hierarchical route reflectors are used to limit the number of IBGP sessions. There could be more than two levels of route reflectors and the top-level route reflectors are fully meshed.",
      "zh-CHS": "在这种拓扑中，分层路由反射器用于限制IBGP会话的数量。可能有两层以上的路线反射器，顶层路线反射器完全啮合。"
    },
    {
      "indent": 9,
      "text": "P1 (RR) --------  P2 (RR)\n   |               |\n   |               |\n   |               |   AS1\n   |               |\n   |               |",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": " P3 (RR)          P4 (RR)\n   |               |\n   |               |\n   |               |   AS1\n   |               |\n   |               |\n ASBR1.1         ASBR1.2\n    \\             /\n     \\           /\n''''''\\'''''''''/''''''''''''\n       \\       /\n        \\     /        AS2\n        ASBR2.1",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 7. Hierarchical Route Reflector",
      "zh-CHS": "图7。分层路由反射器"
    },
    {
      "indent": 3,
      "text": "When the session between ASBR1.1 and ASBR2.1 is gracefully shut down, all BGP routers of AS1 need to reroute traffic to ASBR1.2 before the session between ASBR1.1 and ASBR2.1 is shut down.",
      "zh-CHS": "当ASBR1.1和ASBR2.1之间的会话正常关闭时，AS1的所有BGP路由器需要在ASBR1.1和ASBR2.1之间的会话关闭之前将流量重新路由到ASBR1.2。"
    },
    {
      "indent": 3,
      "text": "Similarly, when the session between ASBR1.1 and ASBR2.1 is gracefully brought up, all affected routers of AS1 preferring ASBR1.1 over ASBR1.2 need to reroute traffic to ASBR1.1 before the less preferred path through ASBR1.2 is possibly withdrawn.",
      "zh-CHS": "类似地，当ASBR1.1和ASBR2.1之间的会话正常启动时，所有优先选择ASBR1.1而不是ASBR1.2的AS1受影响路由器都需要将流量重新路由到ASBR1.1，然后通过ASBR1.2的不太优先路径才可能被撤回。"
    },
    {
      "indent": 0,
      "text": "A.2.4. Confederations",
      "section_title": true,
      "zh-CHS": "A.2.4. 联合会"
    },
    {
      "indent": 3,
      "text": "In this topology, a confederation of ASes is used to limit the number of IBGP sessions. Moreover, RRs may be present in the member ASes of the confederation.",
      "zh-CHS": "在这种拓扑结构中，ASE联盟用于限制IBGP会话的数量。此外，RRs可能存在于联邦成员国中。"
    },
    {
      "indent": 3,
      "text": "Confederations may be run with different sub-options. Regarding the IGP, each member AS can run its own IGP or they can all share the same IGP. Regarding BGP, LOCAL_PREF may or may not cross the member AS boundaries.",
      "zh-CHS": "联合会可以使用不同的子选项运行。关于IGP，每个成员可以运行自己的IGP，也可以共享相同的IGP。关于BGP，本地_PREF可能会也可能不会作为边界跨越成员。"
    },
    {
      "indent": 3,
      "text": "A solution should support the graceful shutdown and graceful bringing up of EBGP sessions between member ASes in the confederation in addition to the graceful shutdown and graceful bringing up of EBGP sessions between a member-AS and an AS outside of the confederation.",
      "zh-CHS": "解决方案应支持联盟内成员AS之间EBGP会话的正常关闭和正常启动，以及联盟外成员AS和AS之间EBGP会话的正常关闭和正常启动。"
    },
    {
      "indent": 9,
      "text": "ASBR1C.1 ---------- ASBR1C.2\n   |                   |\n   |                   |\n   |       AS1C        |\n   |                   |\n   |                   |\n\"\"\"|\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"|\"\"\"\n   |        \"          |\n ASBR1A.2   \"        ASBR1B.2\n   |        \"          |\n   |        \"          |\n   |  AS1A  \"   AS1B   |             AS1\n   |        \"          |\n   |        \"          |\n ASBR1A.1   \"         ASBR1B.1\n    \\       \"         /\n     \\      \"        /\n''''''\\'''''''''''''/''''''''''''\n       \\           /\n        \\         /                   AS2\n          ASBR2.1",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 9,
      "text": "Figure 8. Confederation",
      "zh-CHS": "图8。联邦"
    },
    {
      "indent": 3,
      "text": "In the above figure, member ASes AS1A, AS1B, and AS1C belong to a confederation of ASes in AS1. AS1A and AS1B are connected to AS2.",
      "zh-CHS": "在上图中，AS1A、AS1B和AS1C成员属于AS1中ASE的联盟。AS1A和AS1B与AS2相连。"
    },
    {
      "indent": 3,
      "text": "In normal operation, for the traffic toward AS2:",
      "zh-CHS": "正常运行时，对于AS2的交通："
    },
    {
      "indent": 6,
      "text": "- AS1A sends the traffic directly to AS2 through ASBR1A.1.",
      "zh-CHS": "- AS1A通过ASBR1A.1将流量直接发送到AS2。"
    },
    {
      "indent": 6,
      "text": "- AS1B sends the traffic directly to AS2 through ASBR1B.1.",
      "zh-CHS": "- AS1B通过ASBR1B.1将流量直接发送到AS2。"
    },
    {
      "indent": 6,
      "text": "- AS1C load balances the traffic between AS1A and AS1B.",
      "zh-CHS": "- AS1C负载平衡AS1A和AS1B之间的通信量。"
    },
    {
      "indent": 3,
      "text": "When the session between ASBR1A.1 and ASBR2.1 is gracefully shut down, all BGP routers of AS1 need to reroute traffic to ASBR1B.1 before the session between ASBR1A.1 and ASBR2.1 is shut down.",
      "zh-CHS": "当ASBR1A.1和ASBR2.1之间的会话正常关闭时，AS1的所有BGP路由器需要在ASBR1A.1和ASBR2.1之间的会话关闭之前将流量重新路由到ASBR1B.1。"
    },
    {
      "indent": 3,
      "text": "Similarly, when the session between ASBR1A.1 and ASBR2.1 is gracefully brought up, all affected routers of AS1 preferring ASBR1A.1 over ASBR1B.1 need to reroute traffic to ASBR1A.1 before the less preferred path through ASBR1B.1 is possibly withdrawn.",
      "zh-CHS": "类似地，当ASBR1A.1和ASBR2.1之间的会话正常启动时，优先选择ASBR1A.1而不是ASBR1B.1的AS1的所有受影响路由器都需要将流量重新路由到ASBR1A.1，然后通过ASBR1B.1的不太优先路径才可能被撤回。"
    },
    {
      "indent": 0,
      "text": "A.3. Routing Decisions",
      "section_title": true,
      "zh-CHS": "A.3. 路由决策"
    },
    {
      "indent": 3,
      "text": "Here we describe some routing engineering choices that are frequently used in ASes and that should be supported by the solution.",
      "zh-CHS": "在这里，我们描述了ASE中经常使用的一些路由工程选择，这些选择应该得到解决方案的支持。"
    },
    {
      "indent": 0,
      "text": "A.3.1. Hot Potato (IGP Cost)",
      "section_title": true,
      "zh-CHS": "A.3.1. 烫手山芋（IGP成本）"
    },
    {
      "indent": 3,
      "text": "The ingress router selects the nominal egress ASBR (AS exit point) based on the IGP cost to reach the BGP next-hop.",
      "zh-CHS": "入口路由器根据IGP成本选择标称出口ASBR（作为出口点）以到达BGP下一跳。"
    },
    {
      "indent": 0,
      "text": "A.3.2. Cold Potato (BGP LOCAL_PREF)",
      "section_title": true,
      "zh-CHS": "A.3.2. 冷土豆（BGP本地优先）"
    },
    {
      "indent": 3,
      "text": "The ingress router selects the nominal egress ASBR based on the BGP LOCAL_PREF value set and advertised by the exit point.",
      "zh-CHS": "入口路由器根据BGP LOCAL_PREF值集选择标称出口ASBR，并由出口点公布。"
    },
    {
      "indent": 0,
      "text": "A.3.3. Cold Potato (BGP Preference Set on Ingress)",
      "section_title": true,
      "zh-CHS": "A.3.3. 冷土豆（入口设置BGP首选项）"
    },
    {
      "indent": 3,
      "text": "The ingress router selects the nominal egress ASBR based on preconfigured policy information. (Typically, this is done by locally setting the BGP LOCAL_PREF based on the BGP communities attached on the routes).",
      "zh-CHS": "入口路由器根据预配置的策略信息选择标称出口ASBR。（通常，这是通过基于连接在路由上的BGP社区本地设置BGP LOCAL_PREF来完成的）。"
    },
    {
      "indent": 3,
      "text": "As per [RFC4271], note that if tunnels are not used to forward packets between the ingress and egress ASBR; this can lead to persistent forwarding loops.",
      "zh-CHS": "根据[RFC4271]，注意如果不使用隧道在入口和出口ASBR之间转发数据包；这可能导致持久转发循环。"
    },
    {
      "indent": 0,
      "text": "Authors' Addresses",
      "zh-CHS": "作者地址"
    },
    {
      "indent": 3,
      "text": "Bruno Decraene France Telecom 38-40 rue du General Leclerc 92794 Issy Moulineaux cedex 9 France EMail: bruno.decraene@orange-ftgroup.com",
      "zh-CHS": "Bruno Decarene法国电信公司Leclerc将军街38-40号92794 Issy Moulineaux cedex 9法国电子邮件：Bruno。decraene@orange-ftgroup.com"
    },
    {
      "indent": 3,
      "text": "Pierre Francois Universite catholique de Louvain Place Ste Barbe, 2 Louvain-la-Neuve 1348 BE EMail: francois@info.ucl.ac.be",
      "zh-CHS": "Pierre Francois Universite catholique de Louvain Place Ste Barbe，2 Louvain la Neuve 1348电子邮件：francois@info.ucl.ac.be"
    },
    {
      "indent": 3,
      "text": "Cristel Pelsser Internet Initiative Japan Jinbocho Mitsui Building 1-105 Kanda jinbo-cho Chiyoda-ku, Tokyo 101-0051 Japan EMail: cristel@iij.ad.jp",
      "zh-CHS": "Cristel Pelsser Internet Initiative Japan Jinbocho Mitsui大厦1-105神田jinbo cho Chiyoda ku，东京101-0051日本电子邮件：cristel@iij.ad.jp"
    },
    {
      "indent": 3,
      "text": "Zubair Ahmad Orange Business Services 13775 McLearen Road, Oak Hill VA 20171 USA EMail: zubair.ahmad@orange-ftgroup.com",
      "zh-CHS": "Zubair Ahmad Orange商务服务美国弗吉尼亚州橡树山McLearen路13775号，邮编20171电子邮件：Zubair。ahmad@orange-ftgroup.com"
    },
    {
      "indent": 3,
      "text": "Antonio Jose Elizondo Armengol Division de Analisis Tecnologicos Technology Analysis Division Telefonica I+D C/ Emilio Vargas 6 28043, Madrid EMail: ajea@tid.es",
      "zh-CHS": "Antonio Jose Elizondo Armengol技术分析部Telefonica I+D C/Emilio Vargas 6 28043，马德里电子邮件：ajea@tid.es"
    },
    {
      "indent": 3,
      "text": "Tomonori Takeda NTT Corporation 9-11, Midori-Cho 3 Chrome Musashino-Shi, Tokyo 180-8585 Japan EMail: takeda.tomonori@lab.ntt.co.jp",
      "zh-CHS": "武田NTT株式会社东京武藏市三中町9-11号铬合金武藏市180-8585日本电子邮件：武田。tomonori@lab.ntt.co.jp"
    }
  ]
}