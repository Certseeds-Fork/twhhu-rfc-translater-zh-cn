{
  "title": {
    "text": "RFC 7573: Interworking between the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP): One-to-One Text Chat Sessions",
    "zh-CHS": "RFC 7573"
  },
  "number": 7573,
  "created_at": "2021-10-31 04:38:34.765288+08:00",
  "updated_by": "",
  "contents": [
    {
      "indent": 0,
      "text": "Internet Engineering Task Force (IETF)                    P. Saint-Andre\nRequest for Comments: 7573                                          &yet\nCategory: Standards Track                                      S. Loreto\nISSN: 2070-1721                                                 Ericsson\n                                                               June 2015",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Interworking between the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP): One-to-One Text Chat Sessions",
      "zh-CHS": "会话启动协议（SIP）和可扩展消息和状态协议（XMPP）之间的互通：一对一文本聊天会话"
    },
    {
      "indent": 0,
      "text": "Abstract",
      "zh-CHS": "摘要"
    },
    {
      "indent": 3,
      "text": "This document defines a bidirectional protocol mapping for the exchange of instant messages in the context of a one-to-one chat session between a user of the Session Initiation Protocol (SIP) and a user of the Extensible Messaging and Presence Protocol (XMPP). Specifically for SIP text chat, this document specifies a mapping to the Message Session Relay Protocol (MSRP).",
      "zh-CHS": "本文档定义了一个双向协议映射，用于在会话发起协议（SIP）用户和可扩展消息和状态协议（XMPP）用户之间的一对一聊天会话的上下文中交换即时消息。特别是对于SIP文本聊天，本文档指定了到消息会话中继协议（MSRP）的映射。"
    },
    {
      "indent": 0,
      "text": "Status of This Memo",
      "zh-CHS": "关于下段备忘"
    },
    {
      "indent": 3,
      "text": "This is an Internet Standards Track document.",
      "zh-CHS": "这是一份互联网标准跟踪文件。"
    },
    {
      "indent": 3,
      "text": "This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.",
      "zh-CHS": "本文件是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受了公众审查，并已被互联网工程指导小组（IESG）批准出版。有关互联网标准的更多信息，请参见RFC 5741第2节。"
    },
    {
      "indent": 3,
      "text": "Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc7573.",
      "zh-CHS": "有关本文件当前状态、任何勘误表以及如何提供反馈的信息，请访问http://www.rfc-editor.org/info/rfc7573."
    },
    {
      "indent": 0,
      "text": "Copyright Notice",
      "zh-CHS": "版权公告"
    },
    {
      "indent": 3,
      "text": "Copyright (c) 2015 IETF Trust and the persons identified as the document authors. All rights reserved.",
      "zh-CHS": "版权所有（c）2015 IETF信托基金和确定为文件作者的人员。版权所有。"
    },
    {
      "indent": 3,
      "text": "This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.",
      "zh-CHS": "本文件受BCP 78和IETF信托有关IETF文件的法律规定的约束(http://trustee.ietf.org/license-info)自本文件出版之日起生效。请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。从本文件中提取的代码组件必须包括信托法律条款第4.e节中所述的简化BSD许可证文本，并提供简化BSD许可证中所述的无担保。"
    },
    {
      "indent": 0,
      "text": "Table of Contents",
      "zh-CHS": "目录"
    },
    {
      "indent": 3,
      "text": "1. Introduction ....................................................2\n2. Intended Audience ...............................................3\n3. Terminology .....................................................4\n4. XMPP to MSRP ....................................................4\n5. MSRP to XMPP ....................................................9\n6. Composing Events ...............................................13\n   6.1. Use of the Gone Chat State ................................14\n7. Delivery Reports ...............................................15\n8. Message Size ...................................................17\n9. Internationalization Considerations ............................18\n10. Security Considerations .......................................18\n11. References ....................................................18\n   11.1. Normative References .....................................18\n   11.2. Informative References ...................................19\nAcknowledgements ..................................................20\nAuthors' Addresses ................................................20",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "1. Introduction",
      "section_title": true,
      "zh-CHS": "1. 介绍"
    },
    {
      "indent": 3,
      "text": "Both the Session Initiation Protocol (SIP) [RFC3261] and the Extensible Messaging and Presence Protocol (XMPP) [RFC6120] can be used for the purpose of one-to-one text chat over the Internet. To ensure interworking between these technologies, it is important to define bidirectional protocol mappings.",
      "zh-CHS": "会话启动协议（SIP）[RFC3261]和可扩展消息和状态协议（XMPP）[RFC6120]都可用于通过互联网进行一对一文本聊天。为了确保这些技术之间的互通，定义双向协议映射非常重要。"
    },
    {
      "indent": 3,
      "text": "The architectural assumptions underlying such protocol mappings are provided in [RFC7247], including mapping of addresses and error conditions. This document specifies mappings for one-to-one text chat sessions (sometimes called \"session-mode\" messaging); in particular, this document specifies mappings between XMPP messages of type \"chat\" and the Message Session Relay Protocol (MSRP) [RFC4975], which is commonly used in SIP-based systems for chat functionality (although note that MSRP is not conjoined to SIP, and can be used by non-SIP technologies). Mappings for single instant messages and groupchat are provided in [RFC7572] and [GROUPCHAT].",
      "zh-CHS": "[RFC7247]中提供了此类协议映射的基础架构假设，包括地址和错误条件的映射。本文档指定了一对一文本聊天会话的映射（有时称为“会话模式”消息传递）；特别是，本文档指定了类型为“chat”的XMPP消息与消息会话中继协议（MSRP）[RFC4975]之间的映射，该协议通常用于基于SIP的系统中的聊天功能（尽管请注意，MSRP未连接到SIP，可由非SIP技术使用）。[RFC7572]和[groupchat]中提供了单个即时消息和groupchat的映射。"
    },
    {
      "indent": 3,
      "text": "The approach taken here is to directly map syntax and semantics from one protocol to another. The mapping described herein depends on the protocols defined in the following specifications:",
      "zh-CHS": "这里采用的方法是直接将语法和语义从一个协议映射到另一个协议。本文描述的映射取决于以下规范中定义的协议："
    },
    {
      "indent": 3,
      "text": "o XMPP chat sessions using message stanzas of type \"chat\" are specified in [RFC6121].",
      "zh-CHS": "o [RFC6121]中指定了使用“chat”类型消息节的XMPP聊天会话。"
    },
    {
      "indent": 3,
      "text": "o MSRP chat sessions using the SIP INVITE and SEND request types are specified in [RFC4975].",
      "zh-CHS": "o [RFC4975]中指定了使用SIP INVITE和SEND请求类型的MSRP聊天会话。"
    },
    {
      "indent": 3,
      "text": "In SIP-based systems that use MSRP, a chat session is formally negotiated (just as any other session type is negotiated when using SIP). By contrast, a one-to-one chat \"session\" in XMPP is an informal construct and is not formally negotiated: a user simply sends a message of type \"chat\" to a contact, the contact then replies to the message, and the sum total of such messages exchanged during a defined period of time is considered to be a chat session (ideally tied together using an XMPP <thread/> element as described in Section 5.1 of [RFC6121]). To overcome the disparity between these approaches, a gateway that wishes to map between SIP/MSRP and XMPP for one-to-one chat sessions needs to maintain some additional state, as described below.",
      "zh-CHS": "在使用MSRP的基于SIP的系统中，正式协商聊天会话（就像使用SIP时协商任何其他会话类型一样）。相比之下，XMPP中的一对一聊天“会话”是一种非正式的构造，并且不是正式协商的：用户只需向联系人发送“chat”类型的消息，然后联系人回复该消息，并且在定义的时间段内交换的此类消息的总和被视为聊天会话（理想情况下，使用[RFC6121]第5.1节中所述的XMPP<thread/>元素将其连接在一起）。为了克服这些方法之间的差异，希望在SIP/MSRP和XMPP之间映射一对一聊天会话的网关需要保持一些附加状态，如下所述。"
    },
    {
      "indent": 0,
      "text": "2. Intended Audience",
      "section_title": true,
      "zh-CHS": "2. 目标受众"
    },
    {
      "indent": 3,
      "text": "The documents in this series are intended for use by software developers who have an existing system based on one of these technologies (e.g., SIP) and who would like to enable communication from that existing system to systems based on the other technology (e.g., XMPP). We assume that readers are familiar with the core specifications for both SIP [RFC3261] and XMPP [RFC6120], with the base document for this series [RFC7247], and with the following chat-related specifications:",
      "zh-CHS": "本系列中的文档旨在供软件开发人员使用，这些软件开发人员拥有基于其中一种技术（如SIP）的现有系统，并且希望能够实现从该现有系统到基于其他技术（如XMPP）的系统的通信。我们假设读者熟悉SIP[RFC3261]和XMPP[RFC6120]的核心规范、本系列的基础文档[RFC7247]以及以下与聊天相关的规范："
    },
    {
      "indent": 3,
      "text": "o \"The Message Session Relay Protocol (MSRP)\" [RFC4975]",
      "zh-CHS": "o “消息会话中继协议（MSRP）”[RFC4975]"
    },
    {
      "indent": 3,
      "text": "o \"Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence\" [RFC6121]",
      "zh-CHS": "o “可扩展消息和状态协议（XMPP）：即时消息和状态”[RFC6121]"
    },
    {
      "indent": 3,
      "text": "o \"Indication of Message Composition for Instant Messaging\" [RFC3994]",
      "zh-CHS": "o “即时消息的消息合成指示”[RFC3994]"
    },
    {
      "indent": 3,
      "text": "o \"Chat State Notifications\" [XEP-0085]",
      "zh-CHS": "o “聊天状态通知”[XEP-0085]"
    },
    {
      "indent": 3,
      "text": "Note well that not all protocol-compliant messages are shown (such as SIP 100 TRYING messages), in order to focus the reader on the essential aspects of the protocol flows.",
      "zh-CHS": "请注意，并非所有符合协议的消息都被显示（例如SIP 100 TRYING消息），以便使读者关注协议流的基本方面。"
    },
    {
      "indent": 0,
      "text": "3. Terminology",
      "section_title": true,
      "zh-CHS": "3. 术语"
    },
    {
      "indent": 3,
      "text": "A number of terms used here are explained in [RFC3261], [RFC4975], [RFC6120], and [RFC6121].",
      "zh-CHS": "[RFC3261]、[RFC4975]、[RFC6120]和[RFC6121]中解释了此处使用的许多术语。"
    },
    {
      "indent": 3,
      "text": "In flow diagrams, SIP/MSRP traffic is shown using arrows such as\n\"***>\" whereas XMPP traffic is shown using arrows such as \"...>\".",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in [RFC2119].",
      "zh-CHS": "本文件中的关键词“必须”、“不得”、“必需”、“应”、“不应”、“建议”、“不建议”、“可”和“可选”应按照[RFC2119]中的说明进行解释。"
    },
    {
      "indent": 0,
      "text": "4. XMPP to MSRP",
      "section_title": true,
      "zh-CHS": "4. XMPP到MSRP"
    },
    {
      "indent": 3,
      "text": "In XMPP, the \"informal session\" approach is to simply send someone a <message/> of type \"chat\" without starting any session negotiation ahead of time (as described in [RFC6121]). The XMPP \"informal session\" approach maps very well into a SIP MESSAGE request, as described in [RFC7572]. However, the XMPP informal session approach can also be mapped to MSRP if the XMPP-to-SIP gateway maintains additional state. The order of events is as follows.",
      "zh-CHS": "在XMPP中，“非正式会话”方法是简单地向某人发送“chat”类型的<message/>，而不提前开始任何会话协商（如[RFC6121]中所述）。XMPP“非正式会话”方法很好地映射到SIP消息请求中，如[RFC7572]中所述。但是，如果XMPP到SIP网关保持附加状态，则XMPP非正式会话方法也可以映射到MSRP。事件顺序如下。"
    },
    {
      "indent": 3,
      "text": "XMPP            XMPP        XMPP-to-MSRP        SIP             SIP\nUser           Server         Gateway          Server          User\n |               |               |               |               |\n | (F1) XMPP     |               |               |               |\n | message       |               |               |               |\n |..............>|               |               |               |\n |               | (F2) XMPP     |               |               |\n |               | message       |               |               |\n |               |..............>|               |               |\n |               |               | (F3) SIP      |               |\n |               |               | INVITE        |               |\n |               |               |**************>|               |\n |               |               |               | (F4) SIP      |\n |               |               |               | INVITE        |\n |               |               |               |**************>|\n |               |               |               | (F5) SIP      |\n |               |               |               | 200 OK        |\n |               |               |               |<**************|\n |               |               | (F6) SIP      |               |\n |               |               | 200 OK        |               |\n |               |               |<**************|               |\n |               |               | (F7) SIP ACK  |               |\n |               |               |**************>|               |",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 4,
      "text": "|               |               |               | (F8) SIP ACK  |\n|               |               |               |**************>|\n|               |               | (F9) MSRP SEND                |\n|               |               |******************************>|\n.               .               .               .               .\n.               .               .               .               .\n|               |               | (F10) MSRP SEND               |\n|               |               |<******************************|\n|               | (F11) XMPP    |               |               |\n|               | message       |               |               |\n|               |<..............|               |               |\n| (F12) XMPP    |               |               |               |\n| message       |               |               |               |\n|<..............|               |               |               |\n.               .               .               .               .\n.               .               .               .               .\n|               |               |               | (F13) SIP BYE |\n|               |               |               |<**************|\n|               |               | (F14) SIP BYE |               |\n|               |               |<**************|               |\n|               |               | (F15) SIP     |               |\n|               |               | 200 OK        |               |\n|               |               |**************>|               |\n|               |               |               | (F16) SIP     |\n|               |               |               | 200 OK        |\n|               |               |               |**************>|",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 18,
      "text": "Figure 1: XMPP to MSRP Order of Events",
      "zh-CHS": "图1:XMPP到MSRP的事件顺序"
    },
    {
      "indent": 3,
      "text": "The mapping of XMPP syntax to SIP syntax MUST be as specified in [RFC7572].",
      "zh-CHS": "XMPP语法到SIP语法的映射必须符合[RFC7572]中的规定。"
    },
    {
      "indent": 3,
      "text": "First, the XMPP user would generate an XMPP chat message.",
      "zh-CHS": "首先，XMPP用户将生成一条XMPP聊天消息。"
    },
    {
      "indent": 3,
      "text": "Example 1: Juliet Sends XMPP Message (F1)",
      "zh-CHS": "示例1:Juliet发送XMPP消息（F1）"
    },
    {
      "indent": 3,
      "text": "| <message from='juliet@example.com/yn0cl4bnw0yr3vym'\n|          to='romeo@example.net'\n|          id='a786hjs2'\n|          type='chat'>\n|   <thread>29377446-0CBB-4296-8958-590D79094C50</thread>\n|   <body>Art thou not Romeo, and a Montague?</body>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Upon receiving such a message stanza, the XMPP server needs to determine the identity of the domainpart in the 'to' address, which it does by following the procedures explained in Section 5 of [RFC7247]. If the domain is a SIP domain, the XMPP server will hand",
      "zh-CHS": "在接收到这样一个消息节时，XMPP服务器需要确定“to”地址中domainpart的标识，这是通过遵循[RFC7247]第5节中解释的过程来完成的。如果域是SIP域，XMPP服务器将"
    },
    {
      "indent": 3,
      "text": "off the message stanza to an XMPP-to-SIP gateway or connection manager that natively communicates with MSRP-aware SIP servers.",
      "zh-CHS": "关闭XMPP到SIP网关或连接管理器的消息节，该网关或连接管理器本机与支持MSRP的SIP服务器通信。"
    },
    {
      "indent": 3,
      "text": "The XMPP-to-SIP gateway at the XMPP server would then initiate an MSRP session with Romeo on Juliet's behalf (since there is no reliable way for the gateway to determine whether Romeo's client supports MSRP, if that is not the case then MSRP session initiation might result in an error).",
      "zh-CHS": "然后，XMPP服务器上的XMPP到SIP网关将代表朱丽叶启动与Romeo的MSRP会话（因为网关无法可靠地确定Romeo的客户端是否支持MSRP，如果不是这样，则MSRP会话启动可能会导致错误）。"
    },
    {
      "indent": 3,
      "text": "Example 2: Gateway Starts SIP Session on Behalf of Juliet (F3)",
      "zh-CHS": "示例2：网关代表Juliet（F3）启动SIP会话"
    },
    {
      "indent": 3,
      "text": "| INVITE sip:romeo@example.net SIP/2.0\n| To: <sip:romeo@example.net>\n| From: <sip:juliet@example.com>\n| Contact: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| Subject: Open chat with Juliet?\n| Call-ID: 29377446-0CBB-4296-8958-590D79094C50\n| CSeq: 1 INVITE\n| Content-Type: application/sdp\n|\n| c=IN IP4 x2s.example.com\n| m=message 7654 TCP/MSRP *\n| a=accept-types:text/plain\n| a=path:msrp://x2s.example.com:7654/jshA7weztas;tcp",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Here we assume that Romeo's client supports MSRP and that Romeo accepts the MSRP session request.",
      "zh-CHS": "这里我们假设Romeo的客户端支持MSRP，并且Romeo接受MSRP会话请求。"
    },
    {
      "indent": 3,
      "text": "Example 3: Romeo Accepts Session Request (F5)",
      "zh-CHS": "示例3:Romeo接受会话请求（F5）"
    },
    {
      "indent": 3,
      "text": "| SIP/2.0 200 OK\n| From: <sip:juliet@example.com>\n| To: <sip:romeo@example.net>\n| Contact: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| Call-ID: 29377446-0CBB-4296-8958-590D79094C50\n| CSeq: 1 INVITE\n| Content-Type: application/sdp\n|\n| c=IN IP4 s2x.example.net\n| m=message 12763 TCP/MSRP *\n| a=accept-types:text/plain\n| a=path:msrp://s2x.example.net:12763/kjhd37s2s20w2a;tcp",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "The XMPP-to-SIP gateway then acknowledges the session acceptance on behalf of Juliet.",
      "zh-CHS": "然后XMPP到SIP网关代表Juliet确认会话接受。"
    },
    {
      "indent": 3,
      "text": "Example 4: Gateway Sends ACK to Romeo (F7)",
      "zh-CHS": "示例4：网关向Romeo发送ACK（F7）"
    },
    {
      "indent": 3,
      "text": "| ACK sip:juliet@example.com SIP/2.0\n| To: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| From: <sip:juliet@example.com>\n| Contact: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| Call-ID: 29377446-0CBB-4296-8958-590D79094C50\n| CSeq: 2 ACK",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "The XMPP-to-SIP gateway then transforms the original XMPP chat message into MSRP.",
      "zh-CHS": "然后，XMPP到SIP网关将原始XMPP聊天消息转换为MSRP。"
    },
    {
      "indent": 3,
      "text": "Example 5: Gateway Maps XMPP Message to MSRP (F9)",
      "zh-CHS": "示例5：网关将XMPP消息映射到MSRP（F9）"
    },
    {
      "indent": 3,
      "text": "| MSRP a786hjs2 SEND\n| From-Path: msrp://x2s.example.com:7654/jshA7weztas;tcp\n| To-Path: msrp://s2x.example.net:12763/kjhd37s2s20w2a;tcp\n| Message-ID: 54C6F4F1-A39C-47D6-8718-FA65B3D0414A\n| Byte-Range: 1-25/25\n| Content-Type: text/plain\n|\n| Art thou not Romeo, and a Montague?\n| -------a786hjs2$",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Romeo can then send a reply using his MSRP client.",
      "zh-CHS": "罗密欧可以使用他的MSRP客户端发送回复。"
    },
    {
      "indent": 3,
      "text": "Example 6: Romeo Sends Reply (F10)",
      "zh-CHS": "示例6：罗密欧发送回复（F10）"
    },
    {
      "indent": 3,
      "text": "| MSRP di2fs53v SEND\n| To-Path: msrp://x2s.example.com:7654/jshA7weztas;tcp\n| From-Path: msrp://s2x.example.net:12763/kjhd37s2s20w2a;tcp\n| Message-ID: 6480C096-937A-46E7-BF9D-1353706B60AA\n| Byte-Range: 1-25/25\n| Failure-Report: no\n| Content-Type: text/plain\n|\n| Neither, fair saint, if either thee dislike.\n| -------di2fs53v$",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "The SIP-to-XMPP gateway would then transform that message into appropriate XMPP syntax for routing to the intended recipient.",
      "zh-CHS": "SIP-to-XMPP网关随后将该消息转换为适当的XMPP语法，以便路由到预期的接收者。"
    },
    {
      "indent": 3,
      "text": "Example 7: Gateway Maps MSRP Message to XMPP (F11)",
      "zh-CHS": "示例7：网关将MSRP消息映射到XMPP（F11）"
    },
    {
      "indent": 3,
      "text": "| <message from='romeo@example.net/dr4hcr0st3lup4c'\n|          to='juliet@example.com/yn0cl4bnw0yr3vym'\n|          id='di2fs53v'\n|          type='chat'>\n|   <thread>29377446-0CBB-4296-8958-590D79094C50</thread>\n|   <body>Neither, fair saint, if either thee dislike.</body>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "When the MSRP user wishes to end the chat session, the user's MSRP client sends a SIP BYE.",
      "zh-CHS": "当MSRP用户希望结束聊天会话时，用户的MSRP客户端发送SIP BYE。"
    },
    {
      "indent": 3,
      "text": "Example 8: Romeo Terminates Chat Session (F13)",
      "zh-CHS": "示例8:Romeo终止聊天会话（F13）"
    },
    {
      "indent": 3,
      "text": "| BYE juliet@example.com sip: SIP/2.0\n| From: <sip:juliet@example.com>;tag=786\n| To: <sip:romeo@example.net>;tag=087js\n| Call-ID: 29377446-0CBB-4296-8958-590D79094C50\n| CSeq: 3 BYE\n| Content-Length: 0",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "The BYE is then acknowledged by the XMPP-to-SIP gateway.",
      "zh-CHS": "然后XMPP到SIP网关确认BYE。"
    },
    {
      "indent": 3,
      "text": "Example 9: Gateway Acknowledges Termination (F15)",
      "zh-CHS": "示例9：网关确认终止（F15）"
    },
    {
      "indent": 3,
      "text": "| SIP/2.0 200 OK\n| From: <sip:juliet@example.com>;tag=786\n| To: <sip:romeo@example.net>;tag=087js\n| Call-ID: 29377446-0CBB-4296-8958-590D79094C50\n| CSeq: 3 BYE\n| Content-Length: 0",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Because there is no formal session on the XMPP side, there is no corresponding communication from the gateway to the XMPP user. However, it is reasonable for the gateway to send a \"gone\" chat state notification [XEP-0085], as described under Section 6.1.",
      "zh-CHS": "因为XMPP端没有正式会话，所以网关与XMPP用户之间没有相应的通信。然而，网关发送“消失”聊天状态通知[XEP-0085]是合理的，如第6.1节所述。"
    },
    {
      "indent": 3,
      "text": "In addition, there is no explicit method defined in [RFC6121] for an XMPP user to formally terminate a chat session, so a gateway would need to listen for a \"gone\" chat state notification from the XMPP user or institute a timer that considers the XMPP informal chat session to be ended after some amount of time has elapsed ([XEP-0085] suggests generating a \"gone\" chat state if a user has not interacted with the chat session interface, system, or device for a relatively long period of time, e.g., 10 minutes).",
      "zh-CHS": "此外，[RFC6121]中没有为XMPP用户定义明确的方法来正式终止聊天会话，因此网关需要监听来自XMPP用户的“消失”聊天状态通知，或者设置一个计时器，认为XMPP非正式聊天会话将在经过一段时间后结束（[XEP-0085]建议如果用户在相当长的一段时间（例如10分钟）内没有与聊天会话界面、系统或设备进行交互，则生成“消失”的聊天状态。"
    },
    {
      "indent": 0,
      "text": "5. MSRP to XMPP",
      "section_title": true,
      "zh-CHS": "5. MSRP到XMPP"
    },
    {
      "indent": 3,
      "text": "When an MSRP client sends messages through a gateway to an XMPP client, the order of events is as follows.",
      "zh-CHS": "当MSRP客户端通过网关向XMPP客户端发送消息时，事件顺序如下。"
    },
    {
      "indent": 3,
      "text": "SIP             SIP         MSRP-to-XMPP       XMPP            XMPP\nUser           Server         Gateway         Server           User\n |               |               |               |               |\n | (F17) SIP     |               |               |               |\n | INVITE        |               |               |               |\n |**************>|               |               |               |\n |               | (F18) SIP     |               |               |\n |               | INVITE        |               |               |\n |               |**************>|               |               |\n |               | (F19) SIP     |               |               |\n |               | 200 OK        |               |               |\n |               |<**************|               |               |\n | (F20) SIP     |               |               |               |\n | 200 OK        |               |               |               |\n |<**************|               |               |               |\n | (F21) SIP ACK |               |               |               |\n |**************>|               |               |               |\n |               | (F22) SIP ACK |               |               |\n |               |**************>|               |               |\n | (F23) MSRP SEND               |               |               |\n |******************************>|               |               |\n |               |               | (F24) XMPP    |               |\n |               |               | message       |               |\n |               |               |..............>|               |\n |               |               |               | (F25) XMPP    |\n |               |               |               | message       |\n |               |               |               |..............>|\n .               .               .               .               .\n .               .               .               .               .\n |               |               |               | (F26) XMPP    |\n |               |               |               | message       |\n |               |               |               |<..............|\n |               |               | (F27) XMPP    |               |\n |               |               | message       |               |\n |               |               |<..............|               |\n | (F28) MSRP SEND               |               |               |\n |<******************************|               |               |\n .               .               .               .               .\n .               .               .               .               .\n |               |               |               |               |\n |               |               |               |               |\n | (F29) SIP BYE |               |               |               |\n |**************>|               |               |               |",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 4,
      "text": "|               | (F30) SIP BYE |               |               |\n|               |**************>|               |               |\n|               | (F31) SIP     |               |               |\n|               | 200 OK        |               |               |\n|               |<**************|               |               |\n| (F32) SIP     |               |               |               |\n| 200 OK        |               |               |               |\n|<**************|               |               |               |",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 18,
      "text": "Figure 2: MSRP to XMPP Order of Events",
      "zh-CHS": "图2:MSRP到XMPP的事件顺序"
    },
    {
      "indent": 3,
      "text": "The mapping of SIP syntax to XMPP syntax MUST be as specified in [RFC7572].",
      "zh-CHS": "SIP语法到XMPP语法的映射必须符合[RFC7572]中的规定。"
    },
    {
      "indent": 3,
      "text": "The protocol flow begins when Romeo starts a chat session with Juliet.",
      "zh-CHS": "当罗密欧开始与朱丽叶聊天时，协议流程开始。"
    },
    {
      "indent": 3,
      "text": "Example 10: Romeo Starts Chat Session (F17)",
      "zh-CHS": "示例10:Romeo启动聊天会话（F17）"
    },
    {
      "indent": 3,
      "text": "| INVITE sip:juliet@example.com SIP/2.0\n| From: <sip:romeo@example.net>\n| To: <sip:juliet@example.com>\n| Contact: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| Subject: Open chat with Romeo?\n| Call-ID: F6989A8C-DE8A-4E21-8E07-F0898304796F\n| CSeq: 1 INVITE\n| Content-Type: application/sdp\n|\n| c=IN IP4 s2x.example.net\n| m=message 7313 TCP/MSRP *\n| a=accept-types:text/plain\n| a=path:msrp://s2x.example.net:7313/ansp71weztas;tcp",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Upon receiving the INVITE, the SIP (MSRP) server needs to determine the identity of the domain portion of the Request-URI or To header, which it does by following the procedures explained in Section 5 of [RFC7247]. If the domain is an XMPP domain, the SIP server will hand off the INVITE to an associated MSRP-to-XMPP gateway or connection manager that natively communicates with XMPP servers.",
      "zh-CHS": "收到邀请后，SIP（MSRP）服务器需要确定请求URI或to头的域部分的标识，这是通过遵循[RFC7247]第5节中解释的过程来完成的。如果域是XMPP域，SIP服务器将把邀请传递给与XMPP服务器进行本机通信的关联MSRP到XMPP网关或连接管理器。"
    },
    {
      "indent": 3,
      "text": "Example 11: Gateway Accepts Session on Juliet's Behalf (F19)",
      "zh-CHS": "示例11：网关代表朱丽叶接受会话（F19）"
    },
    {
      "indent": 3,
      "text": "| SIP/2.0 200 OK\n| From: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| To: <sip:juliet@example.com>\n| Contact: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| Call-ID: F6989A8C-DE8A-4E21-8E07-F0898304796F\n| CSeq: 1 INVITE\n| Content-Type: application/sdp\n|\n| c=IN IP4 x2s.example.com\n| m=message 8763 TCP/MSRP *\n| a=accept-types:text/plain\n| a=path:msrp://x2s.example.com:8763/lkjh37s2s20w2a;tcp",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 12: Romeo Sends ACK (F21)",
      "zh-CHS": "示例12:Romeo发送ACK（F21）"
    },
    {
      "indent": 3,
      "text": "| ACK sip:juliet@example.com SIP/2.0\n| To: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| From: <sip:romeo@example.net>\n| Contact: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| Call-ID: F6989A8C-DE8A-4E21-8E07-F0898304796F\n| CSeq: 2 ACK",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 13: Romeo Sends Message (F23)",
      "zh-CHS": "示例13：罗密欧发送消息（F23）"
    },
    {
      "indent": 3,
      "text": "| MSRP ad49kswow SEND\n| To-Path: msrp://x2s.example.com:8763/lkjh37s2s20w2a;tcp\n| From-Path: msrp://s2x.example.net:7313/ansp71weztas;tcp\n| Message-ID: 676FDB92-7852-443A-8005-2A1B9FE44F4E\n| Byte-Range: 1-32/32\n| Failure-Report: no\n| Content-Type: text/plain\n|\n| I take thee at thy word ...\n| -------ad49kswow$",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 14: MSRP-to-XMPP Gateway Maps MSRP Message to XMPP (F24)",
      "zh-CHS": "示例14:MSRP到XMPP网关将MSRP消息映射到XMPP（F24）"
    },
    {
      "indent": 3,
      "text": "| <message from='romeo@example.net'\n|          to='juliet@example.com'\n|          id='ad49kswow'\n|          type='chat'>\n|   <thread>F6989A8C-DE8A-4E21-8E07-F0898304796F</thread>\n|   <body>I take thee at thy word ...</body>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 15: Juliet Sends Reply (F26)",
      "zh-CHS": "示例15:Juliet发送回复（F26）"
    },
    {
      "indent": 3,
      "text": "| <message from='juliet@example.com'\n|          to='romeo@example.net'\n|          id='ms53b7z9'\n|          type='chat'>\n|   <thread>29377446-0CBB-4296-8958-590D79094C50</thread>\n|   <body>What man art thou ...?</body>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 16: Gateway Maps XMPP Message to MSRP (F28)",
      "zh-CHS": "示例16：网关将XMPP消息映射到MSRP（F28）"
    },
    {
      "indent": 3,
      "text": "| MSRP ms53b7z9 SEND\n| To-Path: msrp://s2x.example.net:7313/jshA7weztas;tcp\n| From-Path: msrp://x2s.example.com:8763/lkjh37s2s20w2a;tcp\n| Message-ID: 17EBA17B-94C0-463B-AD84-DE405C4C9D41\n| Byte-Range: 1-25/25\n| Failure-Report: no\n| Content-Type: text/plain\n|\n| What man art thou ...?\n| -------ms53b7z9$",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 17: Romeo Terminates Chat Session (F29)",
      "zh-CHS": "示例17:Romeo终止聊天会话（F29）"
    },
    {
      "indent": 3,
      "text": "| BYE juliet@example.com sip: SIP/2.0\n| To: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| From: <sip:romeo@example.net>\n| Contact: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| Call-ID: F6989A8C-DE8A-4E21-8E07-F0898304796F\n| CSeq: 3 BYE\n| Content-Length: 0",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 18: Gateway Acknowledges Termination of Session on Behalf of Juliet (F31)",
      "zh-CHS": "示例18：网关代表Juliet确认会话终止（F31）"
    },
    {
      "indent": 3,
      "text": "| SIP/2.0 200 OK\n| To: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| From: <sip:romeo@example.net>\n| Contact: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| Call-ID: F6989A8C-DE8A-4E21-8E07-F0898304796F\n| CSeq: 3 BYE",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "6. Composing Events",
      "section_title": true,
      "zh-CHS": "6. 撰写事件"
    },
    {
      "indent": 3,
      "text": "Both XMPP and MSRP enable a client to receive notifications when a person's conversation partner is composing an instant message within the context of a chat session.",
      "zh-CHS": "XMPP和MSRP都使客户机能够在一个人的对话伙伴在聊天会话上下文中编写即时消息时接收通知。"
    },
    {
      "indent": 3,
      "text": "For XMPP, the Chat State Notifications specification [XEP-0085] defines five states: active, inactive, gone, composing, and paused. Some of these states are related to the act of message composition (composing, paused), whereas others are related to the sender's involvement with the chat session (active, inactive, gone). Note that the \"gone\" chat state is not to be confused with the <gone/> stanza error condition defined in [RFC6120].",
      "zh-CHS": "对于XMPP，聊天状态通知规范[XEP-0085]定义了五种状态：活动、非活动、消失、合成和暂停。其中一些状态与消息合成行为（合成、暂停）有关，而另一些状态与发送者参与聊天会话（活动、非活动、消失）有关。请注意，“Goe”聊天状态不能与[RFC6120]中定义的<Goe/>节错误条件混淆。"
    },
    {
      "indent": 3,
      "text": "For MSRP (and, in general, for so-called SIP for Instant Messaging and Presence Leveraging Extensions (SIMPLE) systems), the Indication of Message Composition for Instant Messaging specification [RFC3994] defines two states: idle and active. Here the idle state indicates that the sender is not actively composing a message, and the active state indicates that the sender is indeed actively composing a message (the sending client simply toggles between the two states).",
      "zh-CHS": "对于MSRP（一般来说，对于所谓的SIP即时消息和利用状态扩展（简单）系统），即时消息规范[RFC3994]的消息组合指示定义了两种状态：空闲和活动。在这里，空闲状态表示发送方没有在积极地撰写消息，而活动状态表示发送方确实在积极地撰写消息（发送客户端只是在这两种状态之间切换）。"
    },
    {
      "indent": 3,
      "text": "Because XEP-0085 states can represent information that is not captured in RFC 3994, gateways can either (a) map only the composing-related states or (b) map all the XEP-0085 states.",
      "zh-CHS": "因为XEP-0085状态可以表示RFC 3994中未捕获的信息，所以网关可以（a）仅映射组成相关状态，或者（b）映射所有XEP-0085状态。"
    },
    {
      "indent": 3,
      "text": "The following mappings are suggested.",
      "zh-CHS": "建议使用以下映射。"
    },
    {
      "indent": 3,
      "text": "Table 3: Mapping of SIP/SIMPLE isComposing Events to XMPP Chat states",
      "zh-CHS": "表3:SIP/SIMPLE isComposing事件到XMPP聊天状态的映射"
    },
    {
      "indent": 3,
      "text": "+-------------------+--------------------+\n| isComposing Event |  Chat State        |\n+-------------------+--------------------+\n| active            |  composing         |\n| idle              |  active            |\n+-------------------+--------------------+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Table 4: Mapping of XMPP Chat States to SIP/SIMPLE isComposing Events",
      "zh-CHS": "表4:XMPP聊天状态到SIP/SIMPLE isComposing事件的映射"
    },
    {
      "indent": 3,
      "text": "+-------------------+--------------------+\n| Chat State        | isComposing Event  |\n+-------------------+--------------------+\n| active            |  idle              |\n| inactive          |  idle              |\n| gone              |  none (Section 6.1)|\n| composing         |  active            |\n| paused            |  idle              |\n+-------------------+--------------------+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "The XMPP Chat State Notifications specification [XEP-0085] allows the sending of \"standalone notifications\" outside the context of a message, theoretically even before any messages are exchanged; although a gateway could thus send an <active/> notification to the XMPP user when the SIP user accepts or initiates a chat session (i.e., after F6 in Section 4 or after F22 in Section 5), this usage might be unexpected by XMPP clients as a way to signal the beginning of an informal chat session.",
      "zh-CHS": "XMPP聊天状态通知规范[XEP-0085]允许在消息上下文之外发送“独立通知”，理论上甚至在交换任何消息之前；尽管网关因此可以在SIP用户接受或发起聊天会话时（即，在第4节中的F6之后或在第5节中的F22之后）向XMPP用户发送<active/>通知，但XMPP客户端可能会意外地使用此用法作为非正式聊天会话开始的信号。"
    },
    {
      "indent": 0,
      "text": "6.1. Use of the Gone Chat State",
      "section_title": true,
      "zh-CHS": "6.1. 使用过去的聊天状态"
    },
    {
      "indent": 3,
      "text": "Although there is no direct mapping for the \"gone\" chat state to an isComposing event, receipt of the \"gone\" state at an XMPP-to-MSRP gateway can serve as a trigger for terminating the formal chat session within MSRP, i.e., for sending a SIP BYE for the session from the XMPP-to-MSRP gateway to the SIP user. The following examples illustrate this indirect mapping (which would arise if, for example, the XMPP user were to send a \"gone\" chat state notification after step F12 in Figure 1 or step F28 in Figure 2; in either of these cases, the session would be terminated by the XMPP user instead of by the SIP user, as currently shown in Figures 1 and 2).",
      "zh-CHS": "尽管“gone”聊天状态没有直接映射到isComposing事件，但在XMPP到MSRP网关处接收到“gone”状态可以作为终止MSRP内正式聊天会话的触发器，即，用于将会话的SIP BYE从XMPP到MSRP网关发送给SIP用户。下面的示例说明了这种间接映射（例如，如果XMPP用户在图1中的步骤F12或图2中的步骤F28之后发送“gone”聊天状态通知，则会出现这种映射；在这两种情况中，会话将由XMPP用户而不是SIP用户终止，如图1和图2所示）。"
    },
    {
      "indent": 3,
      "text": "Example 19: Juliet Sends Gone Chat State",
      "zh-CHS": "例19：朱丽叶发送聊天状态"
    },
    {
      "indent": 3,
      "text": "| <message from='juliet@example.com'\n|          id='nx62f197'\n|          to='romeo@example.net'\n|          type='chat'>\n|   <thread>29377446-0CBB-4296-8958-590D79094C50</thread>\n|   <gone xmlns='http://jabber.org/protocol/chatstates'/>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 20: XMPP-to-MSRP Gateway Maps Gone Chat State to SIP BYE",
      "zh-CHS": "示例20:XMPP到MSRP网关将聊天状态映射到SIP BYE"
    },
    {
      "indent": 3,
      "text": "| BYE romeo@example.net sip: SIP/2.0\n| From: <sip:juliet@example.com>;tag=786\n| To: <sip:romeo@example.net>;tag=087js\n| Call-ID: 29377446-0CBB-4296-8958-590D79094C50\n| CSeq: 3 BYE\n| Content-Length: 0",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Similarly, receipt of a SIP BYE message at an MSRP-to-XMPP gateway can serve as a trigger for sending a \"gone\" chat state notification to the XMPP user. The following examples illustrate this indirect mapping (which would occur after step F14 in Figure 1 or step F30 in Figure 2).",
      "zh-CHS": "类似地，在MSRP到XMPP网关处接收到SIP BYE消息可以作为向XMPP用户发送“消失”聊天状态通知的触发器。以下示例说明了这种间接映射（在图1中的步骤F14或图2中的步骤F30之后发生）。"
    },
    {
      "indent": 3,
      "text": "Example 21: Romeo Terminates Chat Session",
      "zh-CHS": "例21:Romeo终止聊天会话"
    },
    {
      "indent": 3,
      "text": "| BYE juliet@example.com sip: SIP/2.0\n| To: <sip:juliet@example.com>;gr=yn0cl4bnw0yr3vym\n| From: <sip:romeo@example.net>\n| Contact: <sip:romeo@example.net>;gr=dr4hcr0st3lup4c\n| Call-ID: F6989A8C-DE8A-4E21-8E07-F0898304796F\n| CSeq: 3 BYE\n| Content-Length: 0",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 22: MSRP-to-XMPP Gateway Generates Gone Chat State",
      "zh-CHS": "示例22:MSRP到XMPP网关生成聊天状态"
    },
    {
      "indent": 3,
      "text": "| <message from='romeo@example.net'\n|          id='hs61v397'\n|          to='juliet@example.com'\n|          type='chat'>\n|   <thread>F6989A8C-DE8A-4E21-8E07-F0898304796F</thread>\n|   <gone xmlns='http://jabber.org/protocol/chatstates'/>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "To enable these uses, gateways that support chat state notifications MUST support the \"gone\" state (which is merely recommended, not required, by [XEP-0085]).",
      "zh-CHS": "为了实现这些用途，支持聊天状态通知的网关必须支持“gone”状态（这只是[XEP-0085]推荐的，不是必需的）。"
    },
    {
      "indent": 3,
      "text": "It is also reasonable for gateways to implement timers that automatically trigger a \"gone\" chat state if the XMPP user has not sent a message within the \"session\" for a given amount of time ([XEP-0085] suggests generating a \"gone\" chat state if a user has not interacted with the chat session interface, system, or device for a relatively long period of time, e.g., 10 minutes).",
      "zh-CHS": "如果XMPP用户在给定的时间段内没有在“会话”中发送消息，网关也可以实现计时器，自动触发“gone”聊天状态（[XEP-0085]建议生成“gone”聊天状态（如果用户在相当长的时间内（例如10分钟）未与聊天会话界面、系统或设备进行交互）。"
    },
    {
      "indent": 0,
      "text": "7. Delivery Reports",
      "section_title": true,
      "zh-CHS": "7. 交付报告"
    },
    {
      "indent": 3,
      "text": "Both XMPP and MSRP enable a client to receive notifications when a message has been received by the intended recipient.",
      "zh-CHS": "XMPP和MSRP都允许客户端在预期收件人收到消息时接收通知。"
    },
    {
      "indent": 3,
      "text": "For XMPP, the Message Receipts specification [XEP-0184] defines a method and XML namespace for requesting and returning indications that a message has been received by a client controlled by the intended recipient.",
      "zh-CHS": "对于XMPP，消息接收规范[XEP-0184]定义了一个方法和XML名称空间，用于请求和返回消息已由预期收件人控制的客户端接收的指示。"
    },
    {
      "indent": 3,
      "text": "For MSRP, a native reporting feature is included, in the form of REPORT chunks (see Sections 7.1.2 and 7.1.3 of [RFC4975]).",
      "zh-CHS": "对于MSRP，以报告块的形式包含本机报告功能（见[RFC4975]第7.1.2节和第7.1.3节）。"
    },
    {
      "indent": 3,
      "text": "An XMPP Message Receipts element of <request\nxmlns='urn:xmpp:receipts'/> is to be mapped to an MSRP Success-Report\nheader field with a value of \"yes\", and an XMPP Message Receipts",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "element of <received xmlns='urn:xmpp:receipts'/> is to be mapped to an MSRP REPORT request.",
      "zh-CHS": "<received xmlns='urn:xmpp:receipts'/>的元素将映射到MSRP报告请求。"
    },
    {
      "indent": 3,
      "text": "A Success-Report header field with a value of \"yes\" in an MSRP SEND request is to be mapped to an XMPP Message Receipts element of <request xmlns='urn:xmpp:receipts'/>, and an MSRP REPORT request is to be mapped to an XMPP message containing only a Message Receipts element of <received xmlns='urn:xmpp:receipts'/>.",
      "zh-CHS": "MSRP发送请求中值为“yes”的成功报告头字段将映射到<request xmns='urn:XMPP:Receipts'/>的XMPP消息接收元素，MSRP报告请求将映射到仅包含<received xmns='urn:XMPP:Receipts'/>的消息接收元素的XMPP消息。"
    },
    {
      "indent": 3,
      "text": "Because the XMPP Message Receipts specification does not support failure reports, there is no mapping for the MSRP Failure-Report header field and gateways SHOULD set that header field to \"no\".",
      "zh-CHS": "由于XMPP消息接收规范不支持故障报告，因此MSRP故障报告头字段没有映射，网关应将该头字段设置为“否”。"
    },
    {
      "indent": 3,
      "text": "Examples follow.",
      "zh-CHS": "下面是一些例子。"
    },
    {
      "indent": 3,
      "text": "First, the XMPP user sends a message containing a request for delivery notification.",
      "zh-CHS": "首先，XMPP用户发送一条包含传递通知请求的消息。"
    },
    {
      "indent": 3,
      "text": "Example 23: Juliet Sends XMPP Message with Receipt Request",
      "zh-CHS": "示例23:Juliet发送带有接收请求的XMPP消息"
    },
    {
      "indent": 3,
      "text": "| <message from='juliet@example.com'\n|          id='bf9m36d5'\n|          to='romeo@example.net'\n|          type='chat'>\n|   <thread>29377446-0CBB-4296-8958-590D79094C50</thread>\n|   <body>What man art thou ...?</body>\n|   <request xmlns='urn:xmpp:receipts'/>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 24: Gateway Maps XMPP Message to MSRP",
      "zh-CHS": "示例24：网关将XMPP消息映射到MSRP"
    },
    {
      "indent": 3,
      "text": "| MSRP bf9m36d5 SEND\n| To-Path: msrp://s2x.example.net:7313/jshA7weztas;tcp\n| From-Path: msrp://x2s.example.com:8763/lkjh37s2s20w2a;tcp\n| Message-ID: 6187CF9B-317A-41DA-BB6A-5E48A9C794EF\n| Byte-Range: 1-25/25\n| Success-Report: yes\n| Failure-Report: no\n| Content-Type: text/plain\n|\n| What man art thou ...?\n| -------bf9m36d5$",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Next, the recipient returns a report.",
      "zh-CHS": "接下来，接收者返回一个报告。"
    },
    {
      "indent": 3,
      "text": "Example 25: Romeo Returns MSRP Receipt",
      "zh-CHS": "示例25:Romeo返回MSRP收据"
    },
    {
      "indent": 3,
      "text": "| MSRP hx74g336 REPORT\n| To-Path: msrp://x2s.example.com:8763/lkjh37s2s20w2a;tcp\n| From-Path: msrp://s2x.example.net:7313/jshA7weztas;tcp\n| Message-ID: 6187CF9B-317A-41DA-BB6A-5E48A9C794EF\n| Byte-Range: 1-106/106\n| Status: 000 200 OK\n| -------hx74g336$",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Example 26: MSRP-to-XMPP Gateway Maps Receipt to XMPP",
      "zh-CHS": "示例26:MSRP到XMPP网关将接收映射到XMPP"
    },
    {
      "indent": 3,
      "text": "| <message from='romeo@example.net'\n|          id='hx74g336'\n|          to='juliet@example.com'>\n|   <received xmlns='urn:xmpp:receipts' id='87652491'/>\n| </message>",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "8. Message Size",
      "section_title": true,
      "zh-CHS": "8. 消息大小"
    },
    {
      "indent": 3,
      "text": "Unlike page-mode messaging [RFC3428] (which specifies that the size of a MESSAGE request is not allowed to exceed 1300 bytes), session-mode messaging [RFC4975] can be used to send larger messages. MSRP includes a chunking mechanism such that larger messages can be broken up into multiple MSRP SEND requests. Because the MSRP gateway at an XMPP service acts as an MSRP endpoint, it is responsible for receiving chunked messages and reconstructing them into a single message for delivery toward the XMPP recipient. (Naturally, implementations need to be careful about accepting very large messages; see Section 14.5 of [RFC4975].)",
      "zh-CHS": "与页面模式消息[RFC3428]（指定消息请求的大小不允许超过1300字节）不同，会话模式消息[RFC4975]可用于发送更大的消息。MSRP包括一个分块机制，这样较大的消息可以被分成多个MSRP发送请求。由于XMPP服务中的MSRP网关充当MSRP端点，因此它负责接收分块消息并将其重新构建为单个消息，以便向XMPP收件人传递。（当然，实现需要小心接受非常大的消息；请参阅[RFC4975]的第14.5节。）"
    },
    {
      "indent": 3,
      "text": "Although there is no hard limit on the size of an XMPP stanza, in practice, most XMPP services (at least on the public Internet) are configured with a maximum stanza size in order to help prevent denial-of-service attacks. As specified in Section 13.12 of [RFC6120], this maximum is not allowed to be less than 10,000 bytes.",
      "zh-CHS": "尽管XMPP节的大小没有硬性限制，但实际上，大多数XMPP服务（至少在公共Internet上）都配置了最大节大小，以帮助防止拒绝服务攻击。根据[RFC6120]第13.12节的规定，该最大值不允许小于10000字节。"
    },
    {
      "indent": 3,
      "text": "The administrators of an XMPP service need to ensure that the associated MSRP gateway is configured with the same or smaller maximum MSRP message size as the maximum XMPP stanza size; this enables the gateway to return an appropriate value for the Session Description Protocol (SDP) \"max-size\" attribute (see Section 8.6 of [RFC4975]) and to properly handle incoming messages larger than the configured limits.",
      "zh-CHS": "XMPP服务的管理员需要确保关联的MSRP网关配置为与最大XMPP节大小相同或更小的最大MSRP消息大小；这使网关能够为会话描述协议（SDP）“最大大小”属性返回适当的值（参见[RFC4975]第8.6节），并正确处理大于配置限制的传入消息。"
    },
    {
      "indent": 3,
      "text": "If an MSRP-to-XMPP gateway implementation receives an MSRP message that exceeds its configured limit as just described, it MUST return an MSRP 413 error (e.g., in response to the first SEND request whose Byte-Range header field indicates a byte total exceeding the limit).",
      "zh-CHS": "如果MSRP到XMPP网关实现接收到的MSRP消息超过了刚才描述的配置限制，则必须返回MSRP 413错误（例如，响应第一个发送请求，其字节范围标头字段指示字节总数超过限制）。"
    },
    {
      "indent": 0,
      "text": "9. Internationalization Considerations",
      "section_title": true,
      "zh-CHS": "9. 国际化考虑"
    },
    {
      "indent": 3,
      "text": "Relevant discussion of internationalized text in messages can be found in [RFC7572].",
      "zh-CHS": "有关消息中国际化文本的相关讨论，请参见[RFC7572]。"
    },
    {
      "indent": 0,
      "text": "10. Security Considerations",
      "section_title": true,
      "zh-CHS": "10. 安全考虑"
    },
    {
      "indent": 3,
      "text": "Detailed security considerations are given in the following documents:",
      "zh-CHS": "以下文件中给出了详细的安全注意事项："
    },
    {
      "indent": 3,
      "text": "o For instant messaging protocols in general, see [RFC2779]",
      "zh-CHS": "o 有关即时消息协议的一般信息，请参见[RFC2779]"
    },
    {
      "indent": 3,
      "text": "o For MSRP chat, see [RFC4975]; for when SIP is used to negotiate MSRP sessions, see [RFC3261]",
      "zh-CHS": "o MSRP聊天请参见[RFC4975]；有关何时使用SIP协商MSRP会话，请参阅[RFC3261]"
    },
    {
      "indent": 3,
      "text": "o For XMPP-based instant messaging, see [RFC6121] and also [RFC6120]",
      "zh-CHS": "o 有关基于XMPP的即时消息，请参见[RFC6121]和[RFC6120]"
    },
    {
      "indent": 3,
      "text": "o For SIP-XMPP interworking in general, see [RFC7247]",
      "zh-CHS": "o 有关SIP-XMPP互通的一般信息，请参见[RFC7247]"
    },
    {
      "indent": 3,
      "text": "o For end-to-end encryption of instant messages, see [RFC7572]",
      "zh-CHS": "o 有关即时消息的端到端加密，请参阅[RFC7572]"
    },
    {
      "indent": 0,
      "text": "11. References",
      "section_title": true,
      "zh-CHS": "11. 工具书类"
    },
    {
      "indent": 0,
      "text": "11.1. Normative References",
      "section_title": true,
      "zh-CHS": "11.1. 规范性引用文件"
    },
    {
      "indent": 3,
      "text": "[RFC2119] Bradner, S., \"Key words for use in RFCs to Indicate Requirement Levels\", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, <http://www.rfc-editor.org/info/rfc2119>.",
      "zh-CHS": "[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，DOI 10.17487/RFC2119，1997年3月<http://www.rfc-editor.org/info/rfc2119>."
    },
    {
      "indent": 3,
      "text": "[RFC3261] Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, \"SIP: Session Initiation Protocol\", RFC 3261, DOI 10.17487/RFC3261, June 2002, <http://www.rfc-editor.org/info/rfc3261>.",
      "zh-CHS": "[RFC3261]Rosenberg，J.，Schulzrinne，H.，Camarillo，G.，Johnston，A.，Peterson，J.，Sparks，R.，Handley，M.，和E.Schooler，“SIP：会话启动协议”，RFC 3261，DOI 10.17487/RFC3261，2002年6月<http://www.rfc-editor.org/info/rfc3261>."
    },
    {
      "indent": 3,
      "text": "[RFC3994] Schulzrinne, H., \"Indication of Message Composition for Instant Messaging\", RFC 3994, DOI 10.17487/RFC3994, January 2005, <http://www.rfc-editor.org/info/rfc3994>.",
      "zh-CHS": "[RFC3994]Schulzrinne，H.，“即时消息的消息组合指示”，RFC 3994，DOI 10.17487/RFC3994，2005年1月<http://www.rfc-editor.org/info/rfc3994>."
    },
    {
      "indent": 3,
      "text": "[RFC4975] Campbell, B., Ed., Mahy, R., Ed., and C. Jennings, Ed., \"The Message Session Relay Protocol (MSRP)\", RFC 4975, DOI 10.17487/RFC4975, September 2007, <http://www.rfc-editor.org/info/rfc4975>.",
      "zh-CHS": "[RFC4975]Campbell，B.，Ed.，Mahy，R.，Ed.，和C.Jennings，Ed.，“消息会话中继协议（MSRP）”，RFC 4975，DOI 10.17487/RFC4975，2007年9月<http://www.rfc-editor.org/info/rfc4975>."
    },
    {
      "indent": 3,
      "text": "[RFC6120] Saint-Andre, P., \"Extensible Messaging and Presence Protocol (XMPP): Core\", RFC 6120, DOI 10.17487/RFC6120, March 2011, <http://www.rfc-editor.org/info/rfc6120>.",
      "zh-CHS": "[RFC6120]Saint Andre，P.，“可扩展消息和状态协议（XMPP）：核心”，RFC 6120，DOI 10.17487/RFC6120，2011年3月<http://www.rfc-editor.org/info/rfc6120>."
    },
    {
      "indent": 3,
      "text": "[RFC6121] Saint-Andre, P., \"Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence\", RFC 6121, DOI 10.17487/RFC6121, March 2011, <http://www.rfc-editor.org/info/rfc6121>.",
      "zh-CHS": "[RFC6121]Saint Andre，P.，“可扩展消息和状态协议（XMPP）：即时消息和状态”，RFC 6121DOI 10.17487/RFC6121，2011年3月<http://www.rfc-editor.org/info/rfc6121>."
    },
    {
      "indent": 3,
      "text": "[RFC7247] Saint-Andre, P., Houri, A., and J. Hildebrand, \"Interworking between the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP): Architecture, Addresses, and Error Handling\", RFC 7247, DOI 10.17487/RFC7247, May 2014, <http://www.rfc-editor.org/info/rfc7247>.",
      "zh-CHS": "[RFC7247]Saint Andre，P.，Houri，A.，和J.Hildebrand，“会话启动协议（SIP）和可扩展消息和状态协议（XMPP）之间的互通：体系结构、地址和错误处理”，RFC 7247，DOI 10.17487/RFC7247，2014年5月<http://www.rfc-editor.org/info/rfc7247>."
    },
    {
      "indent": 3,
      "text": "[RFC7572] Saint-Andre, P., Houri, A., and J. Hildebrand, \"Interworking between the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP): Instant Messaging\", RFC 7572, DOI 10.17487/RFC7572, June 2015, <http://www.rfc-editor.org/info/rfc7572>.",
      "zh-CHS": "[RFC7572]Saint Andre，P.，Houri，A.，和J.Hildebrand，“会话启动协议（SIP）和可扩展消息和状态协议（XMPP）之间的互通：即时消息传递”，RFC 7572，DOI 10.17487/RFC7572，2015年6月<http://www.rfc-editor.org/info/rfc7572>."
    },
    {
      "indent": 3,
      "text": "[XEP-0085] Saint-Andre, P. and D. Smith, \"Chat State Notifications\", XSF XEP 0085, September 2009.",
      "zh-CHS": "[XEP-0085]Saint Andre，P.和D.Smith，“聊天状态通知”，XSF XEP 00852009年9月。"
    },
    {
      "indent": 3,
      "text": "[XEP-0184] Saint-Andre, P. and J. Hildebrand, \"Message Delivery Receipts\", XSF XEP 0184, March 2011.",
      "zh-CHS": "[XEP-0184]Saint Andre，P.和J.Hildebrand，“邮件交付收据”，XSF XEP 0184，2011年3月。"
    },
    {
      "indent": 0,
      "text": "11.2. Informative References",
      "section_title": true,
      "zh-CHS": "11.2. 资料性引用"
    },
    {
      "indent": 3,
      "text": "[GROUPCHAT] Saint-Andre, P., Corretge, S., and S. Loreto, \"Interworking between the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP): Groupchat\", Work in Progress, draft-ietf-stox-groupchat-11, March 2015.",
      "zh-CHS": "[GROUPCHAT]Saint Andre，P.，Corretge，S.，和S.Loreto，“会话启动协议（SIP）和可扩展消息和状态协议（XMPP）之间的互通：GROUPCHAT”，正在进行的工作，草稿-ietf-stox-GROUPCHAT-11，2015年3月。"
    },
    {
      "indent": 3,
      "text": "[RFC2779] Day, M., Aggarwal, S., Mohr, G., and J. Vincent, \"Instant Messaging / Presence Protocol Requirements\", RFC 2779, DOI 10.17487/RFC2779, February 2000, <http://www.rfc-editor.org/info/rfc2779>.",
      "zh-CHS": "[RFC2779]Day，M.，Aggarwal，S.，Mohr，G.，和J.Vincent，“即时消息传递/存在协议要求”，RFC 2779，DOI 10.17487/RFC27792000年2月<http://www.rfc-editor.org/info/rfc2779>."
    },
    {
      "indent": 3,
      "text": "[RFC3428] Campbell, B., Ed., Rosenberg, J., Schulzrinne, H., Huitema, C., and D. Gurle, \"Session Initiation Protocol (SIP) Extension for Instant Messaging\", RFC 3428, DOI 10.17487/RFC3428, December 2002, <http://www.rfc-editor.org/info/rfc3428>.",
      "zh-CHS": "[RFC3428]Campbell，B.，Ed.，Rosenberg，J.，Schulzrinne，H.，Huitema，C.，和D.Gurle，“即时消息的会话启动协议（SIP）扩展”，RFC 3428，DOI 10.17487/RFC3428，2002年12月<http://www.rfc-editor.org/info/rfc3428>."
    },
    {
      "indent": 0,
      "text": "Acknowledgements",
      "zh-CHS": "致谢"
    },
    {
      "indent": 3,
      "text": "Special thanks to Eddy Gavita and Nazin Hossain for coauthoring an early draft version of this document.",
      "zh-CHS": "特别感谢Eddy Gavita和Nazin Hossain共同撰写本文件的早期草稿。"
    },
    {
      "indent": 3,
      "text": "Thanks to Mary Barnes, Ben Campbell, Dave Crocker, Adrian Georgescu, Philipp Hancke, Saul Ibarra Corretge, Tory Patnoe, and Matt Ryan for their feedback.",
      "zh-CHS": "感谢Mary Barnes、Ben Campbell、Dave Crocker、Adrian Georgescu、Philipp Hancke、Saul Ibarra Corretge、Tory Patnoe和Matt Ryan的反馈。"
    },
    {
      "indent": 3,
      "text": "Stephen Farrell, Brian Haberman, Joel Jaeggli, Barry Leiba, Kathleen Moriarty, and Pete Resnick provided helpful input during IESG review.",
      "zh-CHS": "Stephen Farrell、Brian Haberman、Joel Jaeggli、Barry Leiba、Kathleen Moriarty和Pete Resnick在IESG审查期间提供了有用的意见。"
    },
    {
      "indent": 3,
      "text": "The authors gratefully acknowledge the assistance of Markus Isomaki and Yana Stamcheva as the working group chairs and Gonzalo Camarillo and Alissa Cooper as the sponsoring Area Directors.",
      "zh-CHS": "作者衷心感谢工作组主席Markus Isomaki和Yana Stamcheva以及赞助区域主任Gonzalo Camarillo和Alissa Cooper的协助。"
    },
    {
      "indent": 3,
      "text": "Peter Saint-Andre wishes to acknowledge Cisco Systems, Inc., for employing him during his work on earlier draft versions of this document.",
      "zh-CHS": "Peter Saint Andre希望感谢Cisco Systems，Inc.在编写本文件早期草稿期间聘用了他。"
    },
    {
      "indent": 0,
      "text": "Authors' Addresses",
      "zh-CHS": "作者地址"
    },
    {
      "indent": 3,
      "text": "Peter Saint-Andre &yet",
      "zh-CHS": "彼得·圣安德烈&还没有"
    },
    {
      "indent": 3,
      "text": "EMail: peter@andyet.com\nURI:   https://andyet.com/",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Salvatore Loreto Ericsson Hirsalantie 11 Jorvas 02420 Finland",
      "zh-CHS": "萨尔瓦托·洛雷托·爱立信·赫萨兰蒂11 Jorvas 02420芬兰"
    },
    {
      "indent": 3,
      "text": "EMail: Salvatore.Loreto@ericsson.com",
      "raw": true,
      "zh-CHS": " "
    }
  ]
}