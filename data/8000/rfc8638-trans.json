{
  "title": {
    "text": "RFC 8638: IPv4 Multicast over an IPv6 Multicast in Softwire Mesh Networks",
    "zh-CHS": "RFC 8638"
  },
  "number": 8638,
  "created_at": "2021-10-28 01:41:42.285538+08:00",
  "updated_by": "",
  "contents": [
    {
      "indent": 0,
      "text": "Internet Engineering Task Force (IETF)                             M. Xu\nRequest for Comments: 8638                                        Y. Cui\nCategory: Standards Track                                          J. Wu\nISSN: 2070-1721                                      Tsinghua University\n                                                                 S. Yang\n                                                     Shenzhen University\n                                                                 C. Metz\n                                                           Cisco Systems\n                                                          September 2019",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 4,
      "text": "IPv4 Multicast over an IPv6 Multicast in Softwire Mesh Networks",
      "zh-CHS": "软线网状网络中IPv6多播上的IPv4多播"
    },
    {
      "indent": 0,
      "text": "Abstract",
      "zh-CHS": "摘要"
    },
    {
      "indent": 3,
      "text": "During the transition to IPv6, there are scenarios where a backbone network internally running one IP address family (referred to as the internal IP or I-IP family) connects client networks running another IP address family (referred to as the external IP or E-IP family). In such cases, the I-IP backbone needs to offer both unicast and multicast transit services to the client E-IP networks.",
      "zh-CHS": "在过渡到IPv6的过程中，存在这样的场景：内部运行一个IP地址系列（称为内部IP或I-IP系列）的主干网络连接运行另一个IP地址系列（称为外部IP或E-IP系列）的客户端网络。在这种情况下，I-IP骨干网需要向客户端E-IP网络提供单播和多播传输服务。"
    },
    {
      "indent": 3,
      "text": "This document describes a mechanism for supporting multicast across backbone networks where the I-IP and E-IP protocol families differ. The document focuses on the IPv4-over-IPv6 scenario, due to lack of real-world use cases for the IPv6-over-IPv4 scenario.",
      "zh-CHS": "本文档描述了一种在I-IP和E-IP协议系列不同的主干网络上支持多播的机制。由于缺少IPv6-over-IPv4场景的实际用例，本文档重点介绍IPv4-over-IPv6场景。"
    },
    {
      "indent": 0,
      "text": "Status of This Memo",
      "zh-CHS": "关于下段备忘"
    },
    {
      "indent": 3,
      "text": "This is an Internet Standards Track document.",
      "zh-CHS": "这是一份互联网标准跟踪文件。"
    },
    {
      "indent": 3,
      "text": "This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 7841.",
      "zh-CHS": "本文件是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受了公众审查，并已被互联网工程指导小组（IESG）批准出版。有关互联网标准的更多信息，请参见RFC 7841第2节。"
    },
    {
      "indent": 3,
      "text": "Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at https://www.rfc-editor.org/info/rfc8638.",
      "zh-CHS": "有关本文件当前状态、任何勘误表以及如何提供反馈的信息，请访问https://www.rfc-editor.org/info/rfc8638."
    },
    {
      "indent": 0,
      "text": "Copyright Notice",
      "zh-CHS": "版权公告"
    },
    {
      "indent": 3,
      "text": "Copyright (c) 2019 IETF Trust and the persons identified as the document authors. All rights reserved.",
      "zh-CHS": "版权（c）2019 IETF信托基金和被确定为文件作者的人员。版权所有。"
    },
    {
      "indent": 3,
      "text": "This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.",
      "zh-CHS": "本文件受BCP 78和IETF信托有关IETF文件的法律规定的约束(https://trustee.ietf.org/license-info)自本文件出版之日起生效。请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。从本文件中提取的代码组件必须包括信托法律条款第4.e节中所述的简化BSD许可证文本，并提供简化BSD许可证中所述的无担保。"
    },
    {
      "indent": 0,
      "text": "Table of Contents",
      "zh-CHS": "目录"
    },
    {
      "indent": 3,
      "text": "1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3\n2.  Requirements Language . . . . . . . . . . . . . . . . . . . .   5\n3.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   5\n4.  Scope . . . . . . . . . . . . . . . . . . . . . . . . . . . .   6\n5.  Mesh Multicast Mechanism  . . . . . . . . . . . . . . . . . .   7\n  5.1.  Mechanism Overview  . . . . . . . . . . . . . . . . . . .   7\n  5.2.  Group Address Mapping . . . . . . . . . . . . . . . . . .   7\n  5.3.  Source Address Mapping  . . . . . . . . . . . . . . . . .   8\n  5.4.  Routing Mechanism . . . . . . . . . . . . . . . . . . . .   9\n6.  Control-Plane Functions of AFBR . . . . . . . . . . . . . . .  10\n  6.1.  E-IP (*,G) and (S,G) State Maintenance  . . . . . . . . .  10\n  6.2.  I-IP (S',G') State Maintenance  . . . . . . . . . . . . .  10\n  6.3.  E-IP (S,G,rpt) State Maintenance  . . . . . . . . . . . .  10\n  6.4.  Inter-AFBR Signaling  . . . . . . . . . . . . . . . . . .  10\n  6.5.  SPT Switchover  . . . . . . . . . . . . . . . . . . . . .  13\n  6.6.  Other PIM Message Types . . . . . . . . . . . . . . . . .  13\n  6.7.  Maintenance of Other PIM States . . . . . . . . . . . . .  13\n7.  Data-Plane Functions of the AFBR  . . . . . . . . . . . . . .  13\n  7.1.  Process and Forward Multicast Data  . . . . . . . . . . .  13\n  7.2.  TTL or Hop Count  . . . . . . . . . . . . . . . . . . . .  14\n  7.3.  Fragmentation . . . . . . . . . . . . . . . . . . . . . .  14\n8.  Packet Format and Translation . . . . . . . . . . . . . . . .  14\n9.  Softwire Mesh Multicast Encapsulation . . . . . . . . . . . .  16\n10. Security Considerations . . . . . . . . . . . . . . . . . . .  16\n11. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  16\n12. Normative References  . . . . . . . . . . . . . . . . . . . .  16\nAcknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  18\nAuthors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  18",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "1. Introduction",
      "section_title": true,
      "zh-CHS": "1. 介绍"
    },
    {
      "indent": 3,
      "text": "During the transition to IPv6, there are scenarios where a backbone network internally running one IP address family (referred to as the internal IP or I-IP family) connects client networks running another IP address family (referred to as the external IP or E-IP family).",
      "zh-CHS": "在过渡到IPv6的过程中，存在这样的场景：内部运行一个IP地址系列（称为内部IP或I-IP系列）的主干网络连接运行另一个IP地址系列（称为外部IP或E-IP系列）的客户端网络。"
    },
    {
      "indent": 3,
      "text": "One solution is to leverage the multicast functions inherent in the I-IP backbone to efficiently forward client E-IP multicast packets inside an I-IP core tree. The I-IP tree is rooted at one or more ingress Address Family Border Routers (AFBRs) [RFC5565] and branches out to one or more egress AFBRs.",
      "zh-CHS": "一种解决方案是利用I-IP主干中固有的多播功能，在I-IP核心树内高效地转发客户端E-IP多播数据包。I-IP树植根于一个或多个入口地址族边界路由器（afbr）[RFC5565]，并分支到一个或多个出口afbr。"
    },
    {
      "indent": 3,
      "text": "[RFC4925] outlines the requirements for the softwire mesh scenario and includes support for multicast traffic. It is likely that client E-IP multicast sources and receivers will reside in different client E-IP networks connected to an I-IP backbone network. This requires the source-rooted or shared tree of the client E-IP to traverse the I-IP backbone network.",
      "zh-CHS": "[RFC4925]概述了softwire mesh场景的要求，包括对多播通信的支持。客户端E-IP多播源和接收器很可能位于连接到I-IP骨干网络的不同客户端E-IP网络中。这需要客户端E-IP的源根目录树或共享树来遍历I-IP主干网络。"
    },
    {
      "indent": 3,
      "text": "This could be accomplished by reusing the multicast VPN (MVPN) approach outlined in [RFC6513]. MVPN-like schemes can support the softwire mesh scenario and achieve a \"many-to-one\" mapping between the E-IP client multicast trees and the transit-core multicast trees. The advantage of this approach is that the number of trees in the I-IP backbone network scales less than linearly with the number of E-IP client trees. Corporate enterprise networks, and by extension multicast VPNs, have been known to run applications that create too many (S,G) states, which are source-specific states related to a specified multicast group [RFC7761] [RFC7899]. Aggregation at the edge contains the (S,G) states for customers' VPNs and these need to be maintained by the network operator. The disadvantage of this approach is the possibility of inefficient bandwidth and resource utilization when multicast packets are delivered to a receiving AFBR with no attached E-IP receivers.",
      "zh-CHS": "这可以通过重用[RFC6513]中概述的多播VPN（MVPN）方法来实现。类似MVPN的方案可以支持softwire mesh场景，并实现E-IP客户端多播树和传输核心多播树之间的“多对一”映射。这种方法的优点是，I-IP骨干网络中的树的数量与E-IP客户端树的数量的比例小于线性关系。众所周知，公司企业网络和扩展的多播VPN运行的应用程序会创建太多（S，G）状态，这些状态是与指定多播组相关的源特定状态[RFC7761][RFC7899]。边缘聚合包含客户VPN的（S，G）状态，这些状态需要由网络运营商维护。这种方法的缺点是，当多播数据包被传送到没有连接E-IP接收器的接收AFBR时，可能会导致带宽和资源利用率低下。"
    },
    {
      "indent": 3,
      "text": "[RFC8114] provides a solution for delivering IPv4 multicast services over an IPv6 network, but it mainly focuses on the DS-Lite scenario [RFC6333], where IPv4 addresses assigned by a broadband service provider are shared among customers. This document describes a detailed solution for the IPv4-over-IPv6 softwire mesh scenario, where client networks run IPv4 and the backbone network runs IPv6.",
      "zh-CHS": "[RFC8114]提供了通过IPv6网络提供IPv4多播服务的解决方案，但它主要关注DS Lite场景[RFC6333]，其中由宽带服务提供商分配的IPv4地址在客户之间共享。本文档描述了IPv4-over-IPv6 softwire mesh方案的详细解决方案，其中客户端网络运行IPv4，主干网络运行IPv6。"
    },
    {
      "indent": 3,
      "text": "Internet-style multicast is somewhat different from the scenario in [RFC8114] in that the trees are source-rooted and relatively sparse. The need for multicast aggregation at the edge (where many customer",
      "zh-CHS": "Internet风格的多播与[RFC8114]中的场景有些不同，因为树是源根的，并且相对稀疏。需要在边缘（许多客户"
    },
    {
      "indent": 3,
      "text": "multicast trees are mapped to one or more backbone multicast trees) does not exist and to date has not been identified. Thus, the need for alignment between the E-IP and I-IP multicast mechanisms emerges.",
      "zh-CHS": "多播树映射到一个或多个主干（多播树）不存在，迄今尚未识别。因此，需要在E-IP和I-IP多播机制之间进行对齐。"
    },
    {
      "indent": 3,
      "text": "[RFC5565] describes the \"Softwire Mesh Framework\". This document provides a more detailed description of how one-to-one mapping schemes ([RFC5565], Section 11.1) for IPv4-over-IPv6 multicast can be achieved.",
      "zh-CHS": "[RFC5565]描述了“软线网格框架”。本文档更详细地描述了如何实现IPv4-over-IPv6多播的一对一映射方案（[RFC5565]，第11.1节）。"
    },
    {
      "indent": 3,
      "text": "Figure 1 shows an example of how a softwire mesh network can support multicast traffic. A multicast source S is located in one E-IP client network, while candidate E-IP group receivers are located in the same or different E-IP client networks that all share a common I-IP transit network. When E-IP sources and receivers are not local to each other, they can only communicate with each other through the I-IP core. There may be several E-IP sources for a single multicast group residing in different client E-IP networks. In the case of shared trees, the E-IP sources, receivers, and rendezvous points (RPs) might be located in different client E-IP networks. In the simplest case, a single operator manages the resources of the I-IP core, although the inter-operator case is also possible and so not precluded.",
      "zh-CHS": "图1显示了软线网状网络如何支持多播流量的示例。多播源S位于一个E-IP客户端网络中，而候选E-IP组接收器位于共享公共I-IP传输网络的相同或不同的E-IP客户端网络中。当E-IP源和接收器彼此不在本地时，它们只能通过I-IP核心相互通信。对于驻留在不同客户端E-IP网络中的单个多播组，可能存在多个E-IP源。在共享树的情况下，E-IP源、接收器和集合点（RPs）可能位于不同的客户端E-IP网络中。在最简单的情况下，单个运营商管理I-IP核心的资源，尽管运营商之间的情况也是可能的，因此不排除这种情况。"
    },
    {
      "indent": 7,
      "text": "            +---------+          +---------+\n            |         |          |         |  +--------+\n            |  E-IP   |          |  E-IP   +--+Source S|\n            | network |          | network |  +--------+\n            +---+-----+          +--+------+\n                |                   |\n              +-+--------+  +-------+--+\n              |          |  | upstream |\n            +-|   AFBR   +--+   AFBR   |-+\n            | +----------+  +----------+ |\n            |                            |  E-IP multicast\n            |      I-IP transit core     |  packets are forwarded\n            |                            |  across the I-IP\n            | +----------+  +----------+ |  transit core\n            +-|downstream|  |downstream|-+\n              |   AFBR   |--|   AFBR   |\n              +--+-------+  +--------+-+\n                 |                   |\n             +---+----+          +---+----+\n+--------+   |        |          |        |  +--------+\n|Receiver+---+  E-IP  |          |  E-IP  +--+Receiver|\n+--------+   |network |          |network |  +--------+\n             +--------+          +--------+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 16,
      "text": "Figure 1: Softwire Mesh Multicast Framework",
      "zh-CHS": "图1:Softwire网状多播框架"
    },
    {
      "indent": 0,
      "text": "2. Requirements Language",
      "section_title": true,
      "zh-CHS": "2. 需求语言"
    },
    {
      "indent": 3,
      "text": "The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all capitals, as shown here.",
      "zh-CHS": "本文件中的关键词“必须”、“不得”、“必需”、“应”、“不应”、“建议”、“不建议”、“可”和“可选”在所有大写字母出现时（如图所示）应按照BCP 14[RFC2119][RFC8174]所述进行解释。"
    },
    {
      "indent": 0,
      "text": "3. Terminology",
      "section_title": true,
      "zh-CHS": "3. 术语"
    },
    {
      "indent": 3,
      "text": "The following terminology is used in this document.",
      "zh-CHS": "本文件使用以下术语。"
    },
    {
      "indent": 3,
      "text": "o Address Family Border Router (AFBR) - A router interconnecting two or more networks using different IP address families. Additionally, in the context of softwire mesh multicast, the AFBR runs E-IP and I-IP control planes to maintain E-IP and I-IP multicast states respectively and performs the appropriate encapsulation/decapsulation of client E-IP multicast packets for transport across the I-IP core. An AFBR will act as a source and/ or receiver in an I-IP multicast tree.",
      "zh-CHS": "o 地址族边界路由器（AFBR）-使用不同IP地址族将两个或多个网络互连的路由器。此外，在软线网状多播的上下文中，AFBR运行E-IP和I-IP控制平面以分别维持E-IP和I-IP多播状态，并执行客户端E-IP多播分组的适当封装/去封装以跨I-IP核心传输。AFBR将充当I-IP多播树中的源和/或接收器。"
    },
    {
      "indent": 3,
      "text": "o Upstream AFBR: An AFBR that is closer to the source of a multicast data flow.",
      "zh-CHS": "o 上游AFBR：更接近多播数据流源的AFBR。"
    },
    {
      "indent": 3,
      "text": "o Downstream AFBR: An AFBR that is closer to a receiver of a multicast data flow.",
      "zh-CHS": "o 下游AFBR：更靠近多播数据流接收器的AFBR。"
    },
    {
      "indent": 3,
      "text": "o I-IP (Internal IP): This refers to the IP address family that is supported by the core network. In this document, the I-IP is IPv6.",
      "zh-CHS": "o I-IP（内部IP）：指核心网络支持的IP地址系列。在本文档中，I-IP是IPv6。"
    },
    {
      "indent": 3,
      "text": "o E-IP (External IP): This refers to the IP address family that is supported by the client network(s) attached to the I-IP transit core. In this document, the E-IP is IPv4.",
      "zh-CHS": "o E-IP（外部IP）：指连接到I-IP传输核心的客户端网络支持的IP地址系列。在本文档中，E-IP是IPv4。"
    },
    {
      "indent": 3,
      "text": "o I-IP core tree: A distribution tree rooted at one or more AFBR source nodes and branched out to one or more AFBR leaf nodes. An I-IP core tree is built using standard IP or MPLS multicast signaling protocols (in this document, we focus on IP multicast) operating exclusively inside the I-IP core network. An I-IP core tree is used to forward E-IP multicast packets belonging to E-IP trees across the I-IP core. Another name for an I-IP core tree is multicast or multipoint softwire.",
      "zh-CHS": "o I-IP核心树：根在一个或多个AFBR源节点并分支到一个或多个AFBR叶节点的分发树。I-IP核心树是使用标准IP或MPLS多播信令协议（在本文档中，我们重点讨论IP多播）构建的，这些协议专门在I-IP核心网络内运行。I-IP核心树用于跨I-IP核心转发属于E-IP树的E-IP多播数据包。I-IP核心树的另一个名称是多播或多点软线。"
    },
    {
      "indent": 3,
      "text": "o E-IP client tree: A distribution tree rooted at one or more hosts or routers located inside a client E-IP network and branched out to one or more leaf nodes located in the same or different client E-IP networks.",
      "zh-CHS": "o E-IP客户端树：一种分布树，根位于客户端E-IP网络内的一个或多个主机或路由器上，并分支到位于相同或不同客户端E-IP网络中的一个或多个叶节点。"
    },
    {
      "indent": 3,
      "text": "o uPrefix64: The /96 unicast IPv6 prefix for constructing an IPv4-embedded IPv6 unicast address [RFC8114].",
      "zh-CHS": "o uPrefix64:用于构造IPv4嵌入式IPv6单播地址的/96单播IPv6前缀[RFC8114]。"
    },
    {
      "indent": 3,
      "text": "o mPrefix64: The /96 multicast IPv6 prefix for constructing an IPv4-embedded IPv6 multicast address [RFC8114].",
      "zh-CHS": "o mPrefix64:用于构造IPv4嵌入式IPv6多播地址的/96多播IPv6前缀[RFC8114]。"
    },
    {
      "indent": 3,
      "text": "o PIMv4, PIMv6: Refer to [RFC8114].",
      "zh-CHS": "o PIMv4、PIMv6：参考[RFC8114]。"
    },
    {
      "indent": 3,
      "text": "o Inter-AFBR signaling: A mechanism used by downstream AFBRs to send PIMv6 messages to the upstream AFBR.",
      "zh-CHS": "o AFBR间信令：下游AFBR用于向上游AFBR发送PIMv6消息的机制。"
    },
    {
      "indent": 0,
      "text": "4. Scope",
      "section_title": true,
      "zh-CHS": "4. 范围"
    },
    {
      "indent": 3,
      "text": "This document focuses on the IPv4-over-IPv6 scenario, as shown in the following diagram.",
      "zh-CHS": "本文档重点介绍IPv4-over-IPv6场景，如下图所示。"
    },
    {
      "indent": 7,
      "text": "            +---------+        +---------+\n            |  IPv4   |        |  IPv4   |  +--------+\n            | Client  |        | Client  |--+Source S|\n            | Network |        | Network |  +--------+\n            +----+----+        +----+----+\n                 |                  |\n              +--+-------+  +-------+--+\n              |          |  | Upstream |\n            +-+   AFBR   +--+   AFBR   |-+\n            | +----------+  +----------+ |\n            |                            |\n            |      IPv6 transit core     |\n            |                            |\n            | +----------+  +----------+ |\n            +-+Downstream+--+Downstream+-+\n              |   AFBR   |  |   AFBR   |\n              +--+-------+  +-------+--+\n                 |                  |\n            +----+----+        +----+----+\n+--------+  |  IPv4   |        |  IPv4   |  +--------+\n|Receiver+--+ Client  |        | Client  +--+Receiver|\n+--------+  | Network |        | Network |  +--------+\n            +---------+        +---------+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 21,
      "text": "Figure 2: IPv4-over-IPv6 Scenario",
      "zh-CHS": "图2:IPv4-over-IPv6场景"
    },
    {
      "indent": 3,
      "text": "In Figure 2, the E-IP client networks run IPv4, and the I-IP core runs IPv6.",
      "zh-CHS": "在图2中，E-IP客户端网络运行IPv4，I-IP核心运行IPv6。"
    },
    {
      "indent": 3,
      "text": "Because of the much larger IPv6 group address space, the client E-IP tree can be mapped to a specific I-IP core tree. This simplifies operations on the AFBR because it becomes possible to algorithmically",
      "zh-CHS": "由于IPv6组地址空间大得多，因此客户端E-IP树可以映射到特定的I-IP核心树。这简化了AFBR上的操作，因为可以通过算法"
    },
    {
      "indent": 3,
      "text": "map an IPv4 group/source address to an IPv6 group/source address and vice versa.",
      "zh-CHS": "将IPv4组/源地址映射到IPv6组/源地址，反之亦然。"
    },
    {
      "indent": 3,
      "text": "The IPv4-over-IPv6 scenario is an emerging requirement as network operators build out native IPv6 backbone networks. These networks support native IPv6 services and applications, but, in many cases, support for legacy IPv4 unicast and multicast services will also need to be accommodated.",
      "zh-CHS": "随着网络运营商建设本机IPv6骨干网络，IPv4-over-IPv6场景是一个新兴需求。这些网络支持本机IPv6服务和应用程序，但在许多情况下，还需要支持传统IPv4单播和多播服务。"
    },
    {
      "indent": 0,
      "text": "5. Mesh Multicast Mechanism",
      "section_title": true,
      "zh-CHS": "5. 网状多播机制"
    },
    {
      "indent": 0,
      "text": "5.1. Mechanism Overview",
      "section_title": true,
      "zh-CHS": "5.1. 机制概述"
    },
    {
      "indent": 3,
      "text": "Routers in the client E-IP networks have routes to all other client E-IP networks. Through PIMv4 messages, E-IP hosts and routers have discovered or learnt of IPv4 addresses that are in (S,G) or (*,G) state [RFC7761]. Any I-IP multicast state instantiated in the core is referred to as (S',G') or (*,G') and is separated from E-IP multicast state.",
      "zh-CHS": "客户端E-IP网络中的路由器具有到所有其他客户端E-IP网络的路由。通过PIMv4消息，E-IP主机和路由器已发现或获悉处于（S，G）或（*，G）状态的IPv4地址[RFC7761]。核心中实例化的任何I-IP多播状态称为（S'，G'）或（*，G'），并与E-IP多播状态分离。"
    },
    {
      "indent": 3,
      "text": "Suppose a downstream AFBR receives an E-IP PIM Join/Prune message from the E-IP network for either an (S,G) tree or a (*,G) tree. The AFBR translates the PIMv4 message into a PIMv6 message with the latter being directed towards the I-IP IPv6 address of the upstream AFBR. When the PIMv6 message arrives at the upstream AFBR, it is translated back into a PIMv4 message. The result of these actions is the construction of E-IP trees and a corresponding I-IP tree in the I-IP network. An example of the packet format and translation is provided in Section 8.",
      "zh-CHS": "假设下游AFBR从E-IP网络接收（S，G）树或（*，G）树的E-IP PIM加入/删减消息。AFBR将PIMv4消息转换为PIMv6消息，后者指向上游AFBR的I-IP IPv6地址。当PIMv6消息到达上游AFBR时，它被翻译回PIMv4消息。这些操作的结果是在I-IP网络中构建E-IP树和相应的I-IP树。第8节提供了分组格式和翻译的示例。"
    },
    {
      "indent": 3,
      "text": "In this case, it is incumbent upon the AFBRs to perform PIM message conversions in the control plane and IP group address conversions or mappings in the data plane. The AFBRs perform an algorithmic, one-to-one mapping of IPv4 to IPv6.",
      "zh-CHS": "在这种情况下，AFBR有责任在控制平面中执行PIM消息转换，在数据平面中执行IP组地址转换或映射。AFBR执行IPv4到IPv6的算法一对一映射。"
    },
    {
      "indent": 0,
      "text": "5.2. Group Address Mapping",
      "section_title": true,
      "zh-CHS": "5.2. 组地址映射"
    },
    {
      "indent": 3,
      "text": "A simple algorithmic mapping between IPv4 multicast group addresses and IPv6 group addresses is performed. Figure 3 is provided as a reminder of the format:",
      "zh-CHS": "执行IPv4多播组地址和IPv6组地址之间的简单算法映射。图3显示了以下格式："
    },
    {
      "indent": 3,
      "text": "+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+\n| 0-------------32--40--48--56--64--72--80--88--96-----------127|\n+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+\n|                    mPrefix64                  | group address |\n+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 11,
      "text": "Figure 3: IPv4-Embedded IPv6 Multicast Address Format",
      "zh-CHS": "图3:IPv4嵌入式IPv6多播地址格式"
    },
    {
      "indent": 3,
      "text": "An IPv6 multicast prefix (mPrefix64) is provisioned on each AFBR. AFBRs will prepend the prefix to an IPv4 multicast group address when translating it to an IPv6 multicast group address.",
      "zh-CHS": "在每个AFBR上设置IPv6多播前缀（mPrefix64）。在将前缀转换为IPv6多播组地址时，AFBR将前缀前置到IPv4多播组地址。"
    },
    {
      "indent": 3,
      "text": "The construction of the mPrefix64 for Source-Specific Multicast (SSM) is the same as the construction of the mPrefix64 described in Section 5 of [RFC8114].",
      "zh-CHS": "源特定多播（SSM）的mPrefix64构造与[RFC8114]第5节中描述的mPrefix64构造相同。"
    },
    {
      "indent": 3,
      "text": "With this scheme, each IPv4 multicast address can be mapped to an IPv6 multicast address (with the assigned prefix), and each IPv6 multicast address with the assigned prefix can be mapped to an IPv4 multicast address. The group address translation algorithm is specified in Section 5.2 of [RFC8114].",
      "zh-CHS": "通过该方案，每个IPv4多播地址都可以映射到一个IPv6多播地址（具有分配的前缀），每个具有分配的前缀的IPv6多播地址都可以映射到一个IPv4多播地址。[RFC8114]第5.2节规定了组地址转换算法。"
    },
    {
      "indent": 0,
      "text": "5.3. Source Address Mapping",
      "section_title": true,
      "zh-CHS": "5.3. 源地址映射"
    },
    {
      "indent": 3,
      "text": "There are two kinds of multicast: Any-Source Multicast (ASM) and SSM. Considering that the I-IP network and E-IP network may support different kinds of multicast, the source address translation rules needed to support all possible scenarios may become very complex. But since SSM can be implemented with a strict subset of the PIM-SM protocol mechanisms [RFC7761], we can treat the I-IP core as SSM-only to make it as simple as possible. There then remain only two scenarios to be discussed in detail:",
      "zh-CHS": "有两种组播：任意源组播（ASM）和SSM。考虑到I-IP网络和E-IP网络可能支持不同类型的多播，支持所有可能场景所需的源地址转换规则可能变得非常复杂。但是，由于SSM可以使用PIM-SM协议机制的严格子集[RFC7761]来实现，因此我们可以将I-IP核心视为SSM，以使其尽可能简单。然后只剩下两种情况需要详细讨论："
    },
    {
      "indent": 3,
      "text": "o E-IP network supports SSM",
      "zh-CHS": "o E-IP网络支持SSM"
    },
    {
      "indent": 6,
      "text": "One possible way to make sure that the translated PIMv6 message reaches the upstream AFBR is to set S' to a virtual IPv6 address that leads to the upstream AFBR. The unicast address translation should be achieved according to [RFC6052].",
      "zh-CHS": "确保翻译后的PIMv6消息到达上游AFBR的一种可能方法是将S'设置为通向上游AFBR的虚拟IPv6地址。单播地址转换应根据[RFC6052]实现。"
    },
    {
      "indent": 3,
      "text": "o E-IP network supports ASM",
      "zh-CHS": "o E-IP网络支持ASM"
    },
    {
      "indent": 6,
      "text": "The (S,G) source list entry and the (*,G) source list entry differ only in that the latter has both the WildCard (WC) and RPT bits of the Encoded-Source-Address set, while with the former, the bits are cleared. (See Section 4.9.5.1 of [RFC7761].) As a result, the source list entries in (*,G) messages can be translated into source list entries in (S',G') messages by clearing both the WC and RPT bits at downstream AFBRs, and vice versa for the reverse translation at upstream AFBRs.",
      "zh-CHS": "（S，G）源列表项和（*，G）源列表项的不同之处在于后者具有编码源地址集的通配符（WC）和RPT位，而前者则清除位。（参见[RFC7761]第4.9.5.1节）因此，通过清除下游AFBR处的WC和RPT位，（*，G）消息中的源列表项可以转换为（S'，G'）消息中的源列表项，反之亦然，用于上游AFBR处的反向转换。"
    },
    {
      "indent": 0,
      "text": "5.4. Routing Mechanism",
      "section_title": true,
      "zh-CHS": "5.4. 路由机制"
    },
    {
      "indent": 3,
      "text": "With mesh multicast, PIMv6 messages originating from a downstream AFBR need to be propagated to the correct upstream AFBR, and every AFBR needs the /96 prefix in the IPv4-embedded IPv6 source address format [RFC6052].",
      "zh-CHS": "使用网状多播，来自下游AFBR的PIMv6消息需要传播到正确的上游AFBR，并且每个AFBR都需要IPv4嵌入式IPv6源地址格式的/96前缀[RFC6052]。"
    },
    {
      "indent": 3,
      "text": "To achieve this, every AFBR MUST announce the address of one of its E-IPv4 interfaces in the \"v4\" field [RFC6052] alongside the corresponding uPrefix46. The announcement MUST be sent to the other AFBRs through Multiprotocol BGP (MBGP) [RFC4760]. Every uPrefix64 that an AFBR announces MUST be unique. \"uPrefix64\" is an IPv6 prefix, and the distribution mechanism is the same as the traditional mesh unicast scenario.",
      "zh-CHS": "为了实现这一点，每个AFBR必须在“v4”字段[RFC6052]中与相应的uPrefix46一起宣布其一个E-IPv4接口的地址。公告必须通过多协议BGP（MBGP）[RFC4760]发送给其他AFBR。AFBR宣布的每个uPrefix64都必须是唯一的。“uPrefix64”是IPv6前缀，分发机制与传统的mesh单播场景相同。"
    },
    {
      "indent": 3,
      "text": "As the \"v4\" field is an E-IP address, and BGP messages are not tunneled through softwires or any other mechanism specified in [RFC5565], AFBRs MUST be able to transport and encode/decode BGP messages that are carried over the I-IP, and whose Network Layer Reachability Information (NLRI) and next hop (NH) are of the E-IP address family.",
      "zh-CHS": "由于“v4”字段是E-IP地址，且BGP消息不通过软线或[RFC5565]中规定的任何其他机制进行隧道传输，AFBR必须能够传输和编码/解码通过I-IP承载的BGP消息，且其网络层可达性信息（NLRI）和下一跳（NH）属于E-IP地址系列。"
    },
    {
      "indent": 3,
      "text": "In this way, when a downstream AFBR receives an E-IP PIM (S,G) message, it can translate this message into (S',G') by looking up the IP address of the corresponding AFBR's E-IP interface. Since the uPrefix64 of S' is unique and is known to every router in the I-IP network, the translated message will be forwarded to the corresponding upstream AFBR, and the upstream AFBR can translate the message back to (S,G).",
      "zh-CHS": "这样，当下游AFBR接收到E-IP PIM（S，G）消息时，它可以通过查找相应AFBR的E-IP接口的IP地址将该消息转换为（S'，G'）。由于S’的uPrefix64是唯一的，并且I-IP网络中的每个路由器都知道，因此转换后的消息将转发到相应的上游AFBR，并且上游AFBR可以将消息翻译回（S，G）。"
    },
    {
      "indent": 3,
      "text": "When a downstream AFBR receives an E-IP PIM (*,G) message, S' can be generated with the \"source address\" field set to * (the wildcard value). The translated message will be forwarded to the corresponding upstream AFBR. Every PIM router within a PIM domain MUST be able to map a particular multicast group address to the same RP when the source address is set to the wildcard value. (See Section 4.7 of [RFC7761].) So, when the upstream AFBR checks the \"source address\" field of the message, it finds the IPv4 address of the RP and ascertains that this was originally a (*,G) message. This is then translated back to the (*,G) message and processed.",
      "zh-CHS": "当下游AFBR收到E-IP PIM（*，G）消息时，可以生成S'，并将“源地址”字段设置为*（通配符值）。翻译后的消息将转发到相应的上游AFBR。当源地址设置为通配符值时，PIM域中的每个PIM路由器必须能够将特定的多播组地址映射到同一RP。（参见[RFC7761]第4.7节）因此，当上游AFBR检查消息的“源地址”字段时，它会找到RP的IPv4地址，并确定这最初是一条（*，G）消息。然后将其翻译回（*，G）消息并进行处理。"
    },
    {
      "indent": 0,
      "text": "6. Control-Plane Functions of AFBR",
      "section_title": true,
      "zh-CHS": "6. AFBR的控制平面功能"
    },
    {
      "indent": 3,
      "text": "AFBRs are responsible for the functions detailed in the subsections that follow.",
      "zh-CHS": "AFBR负责以下小节中详述的功能。"
    },
    {
      "indent": 0,
      "text": "6.1. E-IP (*,G) and (S,G) State Maintenance",
      "section_title": true,
      "zh-CHS": "6.1. E-IP（*，G）和（S，G）状态维护"
    },
    {
      "indent": 3,
      "text": "E-IP (*,G) and (S,G) state maintenance for an AFBR is the same as E-IP (*,G) and (S,G) state maintenance for a multicast AFTR (mAFTR) described in Section 7.2 of [RFC8114].",
      "zh-CHS": "AFBR的E-IP（*，G）和（S，G）状态维护与[RFC8114]第7.2节中描述的多播AFTR（mAFTR）的E-IP（*，G）和（S，G）状态维护相同。"
    },
    {
      "indent": 0,
      "text": "6.2. I-IP (S',G') State Maintenance",
      "section_title": true,
      "zh-CHS": "6.2. I-IP（S'，G'）状态维护"
    },
    {
      "indent": 3,
      "text": "It is possible that the I-IP transit core runs another, non-transit, I-IP PIM-SSM instance. Since the translated source address starts with the unique \"Well-Known\" prefix or the ISP-defined prefix that MUST NOT be used by another service provider, mesh multicast will not influence non-transit PIM-SSM multicast at all. When an AFBR receives an I-IP (S',G') message, it MUST check S'. If S' starts with the unique prefix, then the message is actually a translated E-IP (S,G) or (*,G) message, and the AFBR translates this message back to a PIMv4 message and processes it.",
      "zh-CHS": "I-IP传输核心可能运行另一个非传输I-IP PIM-SSM实例。由于翻译后的源地址以唯一的“已知”前缀或ISP定义的前缀开头，其他服务提供商不得使用该前缀，因此mesh多播将不会影响非传输PIM-SSM多播。当AFBR收到I-IP（S'，G'）消息时，它必须检查S'。如果S'以唯一前缀开头，则消息实际上是已翻译的E-IP（S，G）或（*，G）消息，AFBR将此消息翻译回PIMv4消息并对其进行处理。"
    },
    {
      "indent": 0,
      "text": "6.3. E-IP (S,G,rpt) State Maintenance",
      "section_title": true,
      "zh-CHS": "6.3. E-IP（S、G、rpt）状态维护"
    },
    {
      "indent": 3,
      "text": "When an AFBR wishes to propagate a Join/Prune(S,G,rpt) message [RFC7761] to an I-IP upstream router, the AFBR MUST operate as specified in Sections 6.5 and 6.6.",
      "zh-CHS": "当AFBR希望将加入/删除（S、G、rpt）消息[RFC7761]传播到I-IP上游路由器时，AFBR必须按照第6.5节和第6.6节的规定运行。"
    },
    {
      "indent": 0,
      "text": "6.4. Inter-AFBR Signaling",
      "section_title": true,
      "zh-CHS": "6.4. AFBR间信令"
    },
    {
      "indent": 3,
      "text": "Assume that one downstream AFBR has joined an RPT of (*,G) and a shortest path tree (SPT) of (S,G) and decided to perform an SPT switchover. (See Section 4.2.1 of [RFC7761].) According to [RFC7761], it should propagate a Prune(S,G,rpt) message along with the periodic Join(*,G) message upstream towards the RP. However, routers in the I-IP transit core do not process (S,G,rpt) messages since the I-IP transit core is treated as SSM only. As a result, the downstream AFBR is unable to prune S from this RPT, so it will receive two copies of the same data for (S,G). In order to solve this problem, we introduce a new mechanism for downstream AFBRs to inform upstream AFBRs of pruning any given S from an RPT.",
      "zh-CHS": "假设一个下游AFBR已加入（*，G）的RPT和（S，G）的最短路径树（SPT），并决定执行SPT切换。（参见[RFC7761]的第4.2.1节）根据[RFC7761]，它应该将剪枝（S，G，rpt）消息与周期性连接（*，G）消息一起向RP上游传播。但是，I-IP传输核心中的路由器不处理（S，G，rpt）消息，因为I-IP传输核心仅被视为SSM。因此，下游AFBR无法从此RPT中删除S，因此它将收到（S，G）相同数据的两个副本。为了解决这个问题，我们为下游AFBR引入了一种新机制，通知上游AFBR从RPT中删除任何给定的AFBR。"
    },
    {
      "indent": 3,
      "text": "When a downstream AFBR wishes to propagate an (S,G,rpt) message upstream, it SHOULD encapsulate the (S,G,rpt) message, then send the encapsulated unicast message to the corresponding upstream AFBR, which we call \"RP'\".",
      "zh-CHS": "当下游AFBR希望向上游传播（S，G，rpt）消息时，它应该封装（S，G，rpt）消息，然后将封装的单播消息发送到相应的上游AFBR，我们称之为“RP”。"
    },
    {
      "indent": 3,
      "text": "When RP' receives this encapsulated message, it MUST decapsulate the message as in the unicast scenario and retrieve the original (S,G,rpt) message. The incoming interface of this message may be different from the outgoing interface that propagates multicast data to the corresponding downstream AFBR, and there may be other downstream AFBRs that need to receive multicast data for (S,G) from this incoming interface, so RP' should not simply process this message as specified in [RFC7761] on the incoming interface.",
      "zh-CHS": "当RP'接收到该封装消息时，它必须像单播场景中那样解除该消息的封装，并检索原始（S、G、rpt）消息。该消息的传入接口可能不同于将多播数据传播到相应下游AFBR的传出接口，并且可能有其他下游AFBR需要从该传入接口接收（S，G）的多播数据，因此RP'不应简单地按照[RFC7761]中的规定处理该消息在传入接口上。"
    },
    {
      "indent": 3,
      "text": "To solve this problem, we introduce an \"interface agent\" to process all the encapsulated (S,G,rpt) messages the upstream AFBR receives. The interface agent's RP' should prune S from the RPT of group G when no downstream AFBR is subscribed to receive multicast data for (S,G) along the RPT.",
      "zh-CHS": "为了解决这个问题，我们引入了一个“接口代理”来处理上游AFBR接收的所有封装（S、G、rpt）消息。当没有下游AFBR订阅沿RPT接收（s，G）的多播数据时，接口代理的RP’应从G组的RPT中删除s。"
    },
    {
      "indent": 3,
      "text": "In this way, we ensure that downstream AFBRs will not miss any multicast data that they need. The cost of this is that multicast data for (S,G) will be duplicated along the RPT received by AFBRs affected by the SPT switchover, if at least one downstream AFBR exists that has not yet sent Prune(S,G,rpt) messages to the upstream AFBR.",
      "zh-CHS": "通过这种方式，我们确保下游AFBR不会丢失它们所需的任何多播数据。这样做的代价是，如果至少有一个下游AFBR尚未向上游AFBR发送Prune（S，G，RPT）消息，则（S，G）的多播数据将沿着受SPT切换影响的AFBR接收的RPT复制。"
    },
    {
      "indent": 3,
      "text": "In certain deployment scenarios (e.g., if there is only a single downstream router), the interface agent function is not required.",
      "zh-CHS": "在某些部署场景中（例如，如果只有一个下游路由器），不需要interface agent功能。"
    },
    {
      "indent": 3,
      "text": "The mechanism used to achieve this is left to the implementation. The following diagram provides one possible solution for an \"interface agent\" implementation:",
      "zh-CHS": "用于实现这一点的机制留给实现。下图为“接口代理”实现提供了一种可能的解决方案："
    },
    {
      "indent": 10,
      "text": "+----------------------------------------+\n|                                        |\n|       +-----------+----------+         |\n|       |  PIM-SM   |    UDP   |         |\n|       +-----------+----------+         |\n|          ^                |            |\n|          |                |            |\n|          |                v            |\n|       +----------------------+         |\n|       |       I/F Agent      |         |\n|       +----------------------+         |\n|   PIM    ^                | multicast  |\n| messages |                |   data     |\n|          |  +-------------+---+        |\n|       +--+--|-----------+     |        |\n|       |     v           |     v        |\n|     +--------- +     +----------+      |\n|     | I-IP I/F |     | I-IP I/F |      |\n|     +----------+     +----------+      |\n|        ^     |          ^     |        |\n|        |     |          |     |        |\n+--------|-----|----------|-----|--------+\n         |     v          |     v",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 13,
      "text": "Figure 4: Interface Agent Implementation Example",
      "zh-CHS": "图4：接口代理实现示例"
    },
    {
      "indent": 3,
      "text": "Figure 4 shows an example of an interface agent implementation using UDP encapsulation. The interface agent has two responsibilities: In the control plane, it should work as a real interface that has joined (*,G), representing all the I-IP interfaces that are outgoing interfaces of the (*,G) state machine, and it should process the (S,G,rpt) messages received from all the I-IP interfaces.",
      "zh-CHS": "图4显示了使用UDP封装的接口代理实现的示例。接口代理有两个职责：在控制平面中，它应该作为一个连接（*，G）的真实接口工作，表示（*，G）状态机的所有输出接口的I-IP接口，并且它应该处理从所有I-IP接口接收的（S，G，rpt）消息。"
    },
    {
      "indent": 3,
      "text": "The interface agent maintains downstream (S,G,rpt) state machines for every downstream AFBR, and it submits Prune(S,G,rpt) messages to the PIM-SM module only when every (S,G,rpt) state machine is in the Prune(P) or PruneTmp(P') state, which means that no downstream AFBR is subscribed to receive multicast data for (S,G) along the RPT of G. Once a (S,G,rpt) state machine changes to NoInfo (NI) state, which means that the corresponding downstream AFBR has switched to receive multicast data for (S,G) along the RPT again, the interface agent MUST send a Join(S,G,rpt) to the PIM-SM module immediately.",
      "zh-CHS": "接口代理为每个下游AFBR维护下游（S，G，rpt）状态机，并且仅当每个（S，G，rpt）状态机处于Prune（P）或PruneTmp（P'）状态时，接口代理才会向PIM-SM模块提交Prune（S，G，rpt）消息，这意味着没有下游AFBR订阅沿G的rpt接收（S，G）的多播数据（S，G，rpt）状态机更改为NoInfo（NI）状态，这意味着相应的下游AFBR已切换为再次沿rpt接收（S，G）的多播数据，接口代理必须立即向PIM-SM模块发送连接（S，G，rpt）。"
    },
    {
      "indent": 3,
      "text": "In the data plane, upon receiving a multicast data packet, the interface agent MUST encapsulate it at first, then propagate the encapsulated packet from every I-IP interface.",
      "zh-CHS": "在数据平面中，接口代理在接收到多播数据包时，必须首先对其进行封装，然后从每个I-IP接口传播封装的数据包。"
    },
    {
      "indent": 3,
      "text": "NOTICE: It is possible that an E-IP neighbor of RP' has joined the RPT of G, so the per-interface state machine for receiving E-IP Join/ Prune(S,G,rpt) messages should be preserved.",
      "zh-CHS": "注意：可能是RP'的E-IP邻居加入了G的RPT，因此应保留用于接收E-IP加入/删减（S、G、RPT）消息的每个接口状态机。"
    },
    {
      "indent": 0,
      "text": "6.5. SPT Switchover",
      "section_title": true,
      "zh-CHS": "6.5. SPT切换"
    },
    {
      "indent": 3,
      "text": "After a new AFBR requests the receipt of traffic destined for a multicast group, it will receive all the data from the RPT at first. At this time, every downstream AFBR will receive multicast data from any source from this RPT, in spite of whether they have switched over to an SPT or not.",
      "zh-CHS": "在新的AFBR请求接收目的地为多播组的流量后，它将首先接收来自RPT的所有数据。此时，每个下游AFBR都将从此RPT接收来自任何源的多播数据，不管它们是否已切换到SPT。"
    },
    {
      "indent": 3,
      "text": "To minimize this redundancy, it is recommended that every AFBR's SwitchToSptDesired(S,G) function employs the \"switch on first packet\" policy. In this way, the delay in switchover to SPT is kept as small as possible, and after the moment that every AFBR has performed the SPT switchover for every S of group G, no data will be forwarded in the RPT of G, thus no more unnecessary duplication will be produced.",
      "zh-CHS": "为了最大限度地减少这种冗余，建议每个AFBR的SwitchToSptDesired（s，G）功能采用“第一个数据包切换”策略。这样，切换到SPT的延迟尽可能小，并且在每个AFBR对G组的每个S执行SPT切换之后，G组的RPT中不会转发任何数据，因此不会产生更多不必要的重复。"
    },
    {
      "indent": 0,
      "text": "6.6. Other PIM Message Types",
      "section_title": true,
      "zh-CHS": "6.6. 其他PIM消息类型"
    },
    {
      "indent": 3,
      "text": "In addition to Join or Prune, other message types exist, including Register, Register-Stop, Hello and Assert. Register and Register-Stop messages are sent by unicast, while Hello and Assert messages are only used between directly linked routers to negotiate with each other. It is not necessary to translate these for forwarding, thus the processing of these messages is out of scope for this document.",
      "zh-CHS": "除了Join或Prune之外，还存在其他消息类型，包括Register、Register Stop、Hello和Assert。Register和Register Stop消息通过单播发送，而Hello和Assert消息仅在直接链接的路由器之间用于相互协商。转发时不需要翻译这些消息，因此这些消息的处理超出了本文档的范围。"
    },
    {
      "indent": 0,
      "text": "6.7. Maintenance of Other PIM States",
      "section_title": true,
      "zh-CHS": "6.7. 其他PIM状态的维护"
    },
    {
      "indent": 3,
      "text": "In addition to states mentioned above, other states exist, including (*,*,RP) and I-IP (*,G') state. Since we treat the I-IP core as SSM only, the maintenance of these states is out of scope for this document.",
      "zh-CHS": "除上述状态外，还存在其他状态，包括（*，*，RP）和I-IP（*，G'）状态。由于我们仅将I-IP核心视为SSM，因此这些状态的维护超出了本文档的范围。"
    },
    {
      "indent": 0,
      "text": "7. Data-Plane Functions of the AFBR",
      "section_title": true,
      "zh-CHS": "7. AFBR的数据平面功能"
    },
    {
      "indent": 0,
      "text": "7.1. Process and Forward Multicast Data",
      "section_title": true,
      "zh-CHS": "7.1. 处理和转发多播数据"
    },
    {
      "indent": 3,
      "text": "Refer to Section 7.4 of [RFC8114]. If there is at least one outgoing interface whose IP address family is different from the incoming interface, the AFBR MUST encapsulate this packet with mPrefix64-derived and uPrefix64-derived IPv6 addresses to form an IPv6 multicast packet.",
      "zh-CHS": "参考[RFC8114]第7.4节。如果至少有一个传出接口的IP地址系列不同于传入接口，则AFBR必须使用mPrefix64派生和uPrefix64派生的IPv6地址封装此数据包，以形成IPv6多播数据包。"
    },
    {
      "indent": 0,
      "text": "7.2. TTL or Hop Count",
      "section_title": true,
      "zh-CHS": "7.2. 跳数"
    },
    {
      "indent": 3,
      "text": "Upon encapsulation, the TTL and hop count in the outer header SHOULD be set by policy. Upon decapsulation, the TTL and hop count in the inner header SHOULD be modified by policy; it MUST NOT be incremented and it MAY be decremented to reflect the cost of tunnel forwarding. Besides, processing of TTL and hop count information in protocol headers depends on the tunneling technology, which is out of scope of this document.",
      "zh-CHS": "封装后，外部标头中的TTL和跃点计数应由策略设置。解除封装后，内部报头中的TTL和跃点计数应由策略修改；它不能增加，也可以减少以反映隧道转发的成本。此外，协议头中TTL和跃点计数信息的处理依赖于隧道技术，这超出了本文的范围。"
    },
    {
      "indent": 0,
      "text": "7.3. Fragmentation",
      "section_title": true,
      "zh-CHS": "7.3. 碎裂"
    },
    {
      "indent": 3,
      "text": "The encapsulation performed by an upstream AFBR will increase the size of packets. As a result, the outgoing I-IP link MTU may not accommodate the larger packet size. It is not always possible for core operators to increase the MTU of every link, thus source fragmentation after encapsulation and reassembling of encapsulated packets MUST be supported by AFBRs [RFC5565]. Path MTU Discovery (PMTUD) [RFC8201] SHOULD be enabled, and ICMPv6 packets MUST NOT be filtered in the I-IP network. Fragmentation and tunnel configuration considerations are provided in Section 8 of [RFC5565]. The detailed procedure can be referred in Section 7.2 of [RFC2473].",
      "zh-CHS": "由上游AFBR执行的封装将增加数据包的大小。结果，出站I-IP链路MTU可能不能容纳较大的分组大小。核心运营商并不总是能够增加每条链路的MTU，因此AFBR必须支持封装和重新组装封装数据包后的源碎片[RFC5565]。应启用路径MTU发现（PMTUD）[RFC8201]，并且不得在I-IP网络中过滤ICMPv6数据包。[RFC5565]第8节提供了碎片和隧道配置注意事项。详细程序见[RFC2473]第7.2节。"
    },
    {
      "indent": 0,
      "text": "8. Packet Format and Translation",
      "section_title": true,
      "zh-CHS": "8. 数据包格式与翻译"
    },
    {
      "indent": 3,
      "text": "Because the PIM-SM specification is independent of the underlying unicast routing protocol, the packet format in Section 4.9 of [RFC7761] remains the same, except that the group address and source address MUST be translated when traversing an AFBR.",
      "zh-CHS": "由于PIM-SM规范独立于基础单播路由协议，因此[RFC7761]第4.9节中的数据包格式保持不变，只是在穿越AFBR时必须转换组地址和源地址。"
    },
    {
      "indent": 3,
      "text": "For example, Figure 5 shows the register-stop message format in the IPv4 and IPv6 address families.",
      "zh-CHS": "例如，图5显示了IPv4和IPv6地址族中的寄存器停止消息格式。"
    },
    {
      "indent": 6,
      "text": " 0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|PIM Ver| Type  |   Reserved    |           Checksum            |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|             IPv4 Group Address (Encoded-Group format)         |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|            IPv4 Source Address (Encoded-Unicast format)       |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 20,
      "text": "(a) IPv4 Register-Stop Message Format",
      "zh-CHS": "(a) IPv4寄存器停止消息格式"
    },
    {
      "indent": 6,
      "text": " 0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|PIM Ver| Type  |   Reserved    |           Checksum            |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|             IPv6 Group Address (Encoded-Group format)         |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|            IPv6 Source Address (Encoded-Unicast format)       |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 20,
      "text": "(b) IPv6 Register-Stop Message Format",
      "zh-CHS": "(b) IPv6寄存器停止消息格式"
    },
    {
      "indent": 18,
      "text": "Figure 5: Register-Stop Message Format",
      "zh-CHS": "图5：寄存器停止消息格式"
    },
    {
      "indent": 3,
      "text": "In Figure 5, the semantics of fields \"PIM Ver\", \"Type\", \"Reserved\", and \"Checksum\" are specified in Section 4.9 of [RFC7761].",
      "zh-CHS": "在图5中，[RFC7761]第4.9节规定了字段“PIM Ver”、“Type”、“Reserved”和“Checksum”的语义。"
    },
    {
      "indent": 3,
      "text": "IPv4 Group Address (Encoded-Group format): The encoded-group format of the IPv4 group address described in Section 4.9.1 of [RFC7761].",
      "zh-CHS": "IPv4组地址（编码组格式）：在[RFC7761]第4.9.1节中描述的IPv4组地址的编码组格式。"
    },
    {
      "indent": 3,
      "text": "IPv4 Source Address (Encoded-Group format): The encoded-unicast format of the IPv4 source address described in Section 4.9.1 of [RFC7761].",
      "zh-CHS": "IPv4源地址（编码组格式）：在[RFC7761]第4.9.1节中描述的IPv4源地址的编码单播格式。"
    },
    {
      "indent": 3,
      "text": "IPv6 Group Address (Encoded-Group format): The encoded-group format of the IPv6 group address described in Section 5.2.",
      "zh-CHS": "IPv6组地址（编码组格式）：第5.2节中描述的IPv6组地址的编码组格式。"
    },
    {
      "indent": 3,
      "text": "IPv6 Source Address (Encoded-Group format): The encoded-unicast format of the IPv6 source address described in Section 5.3.",
      "zh-CHS": "IPv6源地址（编码组格式）：第5.3节中描述的IPv6源地址的编码单播格式。"
    },
    {
      "indent": 0,
      "text": "9. Softwire Mesh Multicast Encapsulation",
      "section_title": true,
      "zh-CHS": "9. 软线网状多播封装"
    },
    {
      "indent": 3,
      "text": "Softwire mesh multicast encapsulation does not require the use of any one particular encapsulation mechanism. Rather, it MUST accommodate a variety of different encapsulation mechanisms and allow the use of encapsulation mechanisms mentioned in [RFC4925]. Additionally, all of the AFBRs attached to the I-IP network MUST implement the same encapsulation mechanism and follow the requirements mentioned in Section 8 of [RFC5565].",
      "zh-CHS": "Softwire mesh多播封装不需要使用任何一种特定的封装机制。相反，它必须适应各种不同的封装机制，并允许使用[RFC4925]中提到的封装机制。此外，连接到I-IP网络的所有AFBR必须实现相同的封装机制，并遵循[RFC5565]第8节中提到的要求。"
    },
    {
      "indent": 0,
      "text": "10. Security Considerations",
      "section_title": true,
      "zh-CHS": "10. 安全考虑"
    },
    {
      "indent": 3,
      "text": "The security concerns raised in [RFC4925] and [RFC7761] are applicable here.",
      "zh-CHS": "[RFC4925]和[RFC7761]中提出的安全问题适用于此处。"
    },
    {
      "indent": 3,
      "text": "The additional workload associated with some schemes, such as interface agents, could be exploited by an attacker to perform a DDoS attack.",
      "zh-CHS": "攻击者可以利用与某些方案（如接口代理）相关的额外工作负载来执行DDoS攻击。"
    },
    {
      "indent": 3,
      "text": "Compared with [RFC4925], the security concerns should be considered more carefully: An attacker could potentially set up many multicast trees in the edge networks, causing too many multicast states in the core network. To defend against these attacks, BGP policies SHOULD be carefully configured, e.g., AFBRs only accept Well-Known prefix advertisements from trusted peers. Besides, cryptographic methods for authenticating BGP sessions [RFC7454] could be used.",
      "zh-CHS": "与[RFC4925]相比，应该更仔细地考虑安全问题：攻击者可能在边缘网络中建立许多多播树，从而在核心网络中造成过多的多播状态。为了防御这些攻击，应仔细配置BGP策略，例如，AFBR仅接受来自受信任对等方的已知前缀广告。此外，还可以使用加密方法验证BGP会话[RFC7454]。"
    },
    {
      "indent": 0,
      "text": "11. IANA Considerations",
      "section_title": true,
      "zh-CHS": "11. IANA考虑"
    },
    {
      "indent": 3,
      "text": "This document has no IANA actions.",
      "zh-CHS": "本文档没有IANA操作。"
    },
    {
      "indent": 0,
      "text": "12. Normative References",
      "section_title": true,
      "zh-CHS": "12. 规范性引用文件"
    },
    {
      "indent": 3,
      "text": "[RFC2119] Bradner, S., \"Key words for use in RFCs to Indicate Requirement Levels\", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, <https://www.rfc-editor.org/info/rfc2119>.",
      "zh-CHS": "[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，DOI 10.17487/RFC2119，1997年3月<https://www.rfc-editor.org/info/rfc2119>."
    },
    {
      "indent": 3,
      "text": "[RFC2473] Conta, A. and S. Deering, \"Generic Packet Tunneling in IPv6 Specification\", RFC 2473, DOI 10.17487/RFC2473, December 1998, <https://www.rfc-editor.org/info/rfc2473>.",
      "zh-CHS": "[RFC2473]Conta，A.和S.Deering，“IPv6规范中的通用数据包隧道”，RFC 2473，DOI 10.17487/RFC2473，1998年12月<https://www.rfc-editor.org/info/rfc2473>."
    },
    {
      "indent": 3,
      "text": "[RFC4760] Bates, T., Chandra, R., Katz, D., and Y. Rekhter, \"Multiprotocol Extensions for BGP-4\", RFC 4760, DOI 10.17487/RFC4760, January 2007, <https://www.rfc-editor.org/info/rfc4760>.",
      "zh-CHS": "[RFC4760]Bates，T.，Chandra，R.，Katz，D.，和Y.Rekhter，“BGP-4的多协议扩展”，RFC 4760，DOI 10.17487/RFC4760，2007年1月<https://www.rfc-editor.org/info/rfc4760>."
    },
    {
      "indent": 3,
      "text": "[RFC4925] Li, X., Ed., Dawkins, S., Ed., Ward, D., Ed., and A. Durand, Ed., \"Softwire Problem Statement\", RFC 4925, DOI 10.17487/RFC4925, July 2007, <https://www.rfc-editor.org/info/rfc4925>.",
      "zh-CHS": "[RFC4925]Li，X.，Ed.，Dawkins，S.，Ed.，Ward，D.，Ed.，和A.Durand，Ed.，“软线问题声明”，RFC 4925，DOI 10.17487/RFC4925，2007年7月<https://www.rfc-editor.org/info/rfc4925>."
    },
    {
      "indent": 3,
      "text": "[RFC5565] Wu, J., Cui, Y., Metz, C., and E. Rosen, \"Softwire Mesh Framework\", RFC 5565, DOI 10.17487/RFC5565, June 2009, <https://www.rfc-editor.org/info/rfc5565>.",
      "zh-CHS": "[RFC5565]Wu，J.，Cui，Y.，Metz，C.和E.Rosen，“软线网格框架”，RFC 5565，DOI 10.17487/RFC5565，2009年6月<https://www.rfc-editor.org/info/rfc5565>."
    },
    {
      "indent": 3,
      "text": "[RFC6052] Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X. Li, \"IPv6 Addressing of IPv4/IPv6 Translators\", RFC 6052, DOI 10.17487/RFC6052, October 2010, <https://www.rfc-editor.org/info/rfc6052>.",
      "zh-CHS": "[RFC6052]Bao，C.，Huitema，C.，Bagnulo，M.，Boucadair，M.，和X.Li，“IPv4/IPv6转换器的IPv6寻址”，RFC 6052，DOI 10.17487/RFC6052，2010年10月<https://www.rfc-editor.org/info/rfc6052>."
    },
    {
      "indent": 3,
      "text": "[RFC6333] Durand, A., Droms, R., Woodyatt, J., and Y. Lee, \"Dual-Stack Lite Broadband Deployments Following IPv4 Exhaustion\", RFC 6333, DOI 10.17487/RFC6333, August 2011, <https://www.rfc-editor.org/info/rfc6333>.",
      "zh-CHS": "[RFC6333]Durand，A.，Droms，R.，Woodyatt，J.，和Y.Lee，“IPv4耗尽后的双栈Lite宽带部署”，RFC 6333，DOI 10.17487/RFC6333，2011年8月<https://www.rfc-editor.org/info/rfc6333>."
    },
    {
      "indent": 3,
      "text": "[RFC6513] Rosen, E., Ed. and R. Aggarwal, Ed., \"Multicast in MPLS/ BGP IP VPNs\", RFC 6513, DOI 10.17487/RFC6513, February 2012, <https://www.rfc-editor.org/info/rfc6513>.",
      "zh-CHS": "[RFC6513]Rosen，E.，Ed.和R.Aggarwal，Ed.，“MPLS/BGP IP VPN中的多播”，RFC 6513，DOI 10.17487/RFC6513，2012年2月<https://www.rfc-editor.org/info/rfc6513>."
    },
    {
      "indent": 3,
      "text": "[RFC7454] Durand, J., Pepelnjak, I., and G. Doering, \"BGP Operations and Security\", BCP 194, RFC 7454, DOI 10.17487/RFC7454, February 2015, <https://www.rfc-editor.org/info/rfc7454>.",
      "zh-CHS": "[RFC7454]Durand，J.，Pepelnjak，I.，和G.Doering，“BGP运营和安全”，BCP 194，RFC 7454，DOI 10.17487/RFC7454，2015年2月<https://www.rfc-editor.org/info/rfc7454>."
    },
    {
      "indent": 3,
      "text": "[RFC7761] Fenner, B., Handley, M., Holbrook, H., Kouvelas, I., Parekh, R., Zhang, Z., and L. Zheng, \"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)\", STD 83, RFC 7761, DOI 10.17487/RFC7761, March 2016, <https://www.rfc-editor.org/info/rfc7761>.",
      "zh-CHS": "[RFC7761]Fenner，B.，Handley，M.，Holbrook，H.，Kouvelas，I.，Parekh，R.，Zhang，Z.，和L.Zheng，“协议独立多播-稀疏模式（PIM-SM）：协议规范（修订版）”，STD 83，RFC 7761，DOI 10.17487/RFC7761，2016年3月<https://www.rfc-editor.org/info/rfc7761>."
    },
    {
      "indent": 3,
      "text": "[RFC7899] Morin, T., Ed., Litkowski, S., Patel, K., Zhang, Z., Kebler, R., and J. Haas, \"Multicast VPN State Damping\", RFC 7899, DOI 10.17487/RFC7899, June 2016, <https://www.rfc-editor.org/info/rfc7899>.",
      "zh-CHS": "[RFC7899]Morin，T.，Ed.，Litkowski，S.，Patel，K.，Zhang，Z.，Kebler，R.，和J.Haas，“多播VPN状态阻尼”，RFC 7899，DOI 10.17487/RFC7899，2016年6月<https://www.rfc-editor.org/info/rfc7899>."
    },
    {
      "indent": 3,
      "text": "[RFC8114] Boucadair, M., Qin, C., Jacquenet, C., Lee, Y., and Q. Wang, \"Delivery of IPv4 Multicast Services to IPv4 Clients over an IPv6 Multicast Network\", RFC 8114, DOI 10.17487/RFC8114, March 2017, <https://www.rfc-editor.org/info/rfc8114>.",
      "zh-CHS": "[RFC8114]Boucadair，M.，Qin，C.，Jacquenet，C.，Lee，Y.，和Q.Wang，“通过IPv6多播网络向IPv4客户端提供IPv4多播服务”，RFC 8114，DOI 10.17487/RFC8114，2017年3月<https://www.rfc-editor.org/info/rfc8114>."
    },
    {
      "indent": 3,
      "text": "[RFC8174] Leiba, B., \"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words\", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017, <https://www.rfc-editor.org/info/rfc8174>.",
      "zh-CHS": "[RFC8174]Leiba，B.，“RFC 2119关键词中大写与小写的歧义”，BCP 14，RFC 8174，DOI 10.17487/RFC8174，2017年5月<https://www.rfc-editor.org/info/rfc8174>."
    },
    {
      "indent": 3,
      "text": "[RFC8201] McCann, J., Deering, S., Mogul, J., and R. Hinden, Ed., \"Path MTU Discovery for IP version 6\", STD 87, RFC 8201, DOI 10.17487/RFC8201, July 2017, <https://www.rfc-editor.org/info/rfc8201>.",
      "zh-CHS": "[RFC8201]McCann，J.，Deering，S.，Mogul，J.，和R.Hinden，编辑，“IP版本6的路径MTU发现”，STD 87，RFC 8201，DOI 10.17487/RFC8201，2017年7月<https://www.rfc-editor.org/info/rfc8201>."
    },
    {
      "indent": 0,
      "text": "Acknowledgements",
      "zh-CHS": "致谢"
    },
    {
      "indent": 3,
      "text": "Wenlong Chen, Xuan Chen, Alain Durand, Yiu Lee, Jacni Qin, and Stig Venaas provided useful input to this document.",
      "zh-CHS": "陈文龙、陈轩、阿兰·杜兰德、姚莉、贾斯尼·琴和斯蒂格·维纳斯为本文件提供了有用的输入。"
    },
    {
      "indent": 0,
      "text": "Authors' Addresses",
      "zh-CHS": "作者地址"
    },
    {
      "indent": 3,
      "text": "Mingwei Xu Tsinghua University Department of Computer Science Beijing 100084 China",
      "zh-CHS": "徐明伟清华大学计算机科学系北京100084"
    },
    {
      "indent": 3,
      "text": "Phone: +86-10-6278-5822\nEmail: xumw@tsinghua.edu.cn",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Yong Cui Tsinghua University Department of Computer Science Beijing 100084 China",
      "zh-CHS": "清华大学计算机科学系北京100084"
    },
    {
      "indent": 3,
      "text": "Phone: +86-10-6278-5822\nEmail: cuiyong@tsinghua.edu.cn",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Jianping Wu Tsinghua University Department of Computer Science Beijing 100084 China",
      "zh-CHS": "吴建平清华大学计算机科学系北京100084"
    },
    {
      "indent": 3,
      "text": "Phone: +86-10-6278-5983\nEmail: jianping@cernet.edu.cn",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Shu Yang Shenzhen University South Campus Shenzhen 518060 China",
      "zh-CHS": "深圳大学蜀洋南校区中国深圳518060"
    },
    {
      "indent": 3,
      "text": "Phone: +86-755-2653-4078\nEmail: yang.shu@szu.edu.cn",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Chris Metz Cisco Systems 170 West Tasman Drive San Jose, CA 95134 United States of America",
      "zh-CHS": "Chris Metz Cisco Systems美国加利福尼亚州圣何塞市西塔斯曼大道170号，邮编95134"
    },
    {
      "indent": 3,
      "text": "Phone: +1-408-525-3275\nEmail: chmetz@cisco.com",
      "raw": true,
      "zh-CHS": " "
    }
  ]
}